<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ramadan 1447 â€” Maria Kanwal</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;600;900&family=Raleway:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{--gold:#c9a84c;--gold-light:#e8c96a;--gold-dim:#7a6230;--bg:#04040a;--surface:#10101e;--surface2:#161628;--green:#2ecc71;--red:#e74c3c;--purple:#9b59b6;--text:#e8e0cc;--text-dim:#8a7f6a;--border:rgba(201,168,76,0.2);}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:'Raleway',sans-serif;min-height:100vh;overflow-x:hidden;}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(201,168,76,0.04),transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(100,80,200,0.04),transparent 50%);pointer-events:none;z-index:0;}
.stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden;}
.star{position:absolute;background:#fff;border-radius:50%;animation:twinkle var(--d,3s) ease-in-out infinite var(--delay,0s);}
@keyframes twinkle{0%,100%{opacity:.1;}50%{opacity:.7;}}
.tab-bar{position:sticky;top:0;z-index:100;background:rgba(4,4,10,0.97);border-bottom:1px solid var(--border);backdrop-filter:blur(20px);display:flex;overflow-x:auto;scrollbar-width:none;}
.tab-bar::-webkit-scrollbar{display:none;}
.tab-btn{flex-shrink:0;padding:10px 7px;background:none;border:none;color:var(--text-dim);font-family:'Raleway',sans-serif;font-size:8.5px;font-weight:700;letter-spacing:0px;text-transform:uppercase;cursor:pointer;transition:all .3s;border-bottom:2px solid transparent;white-space:nowrap;}
.tab-btn.active{color:var(--gold);border-bottom-color:var(--gold);}
.panel{display:none;padding:18px 14px;max-width:860px;margin:0 auto;position:relative;z-index:1;}
.panel.active{display:block;}
.section-title{font-family:'Cinzel',serif;font-size:19px;font-weight:600;color:var(--gold);text-align:center;margin-bottom:5px;letter-spacing:2px;}
.section-sub{text-align:center;color:var(--text-dim);font-size:11px;letter-spacing:1px;margin-bottom:18px;}
.card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;margin-bottom:13px;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.clock-wrap{text-align:center;padding:22px 12px;}
.clock-city{font-size:10px;color:var(--text-dim);text-transform:uppercase;letter-spacing:3px;margin-bottom:8px;}
.clock-time{font-family:'Cinzel',serif;font-size:48px;font-weight:900;color:var(--gold);text-shadow:0 0 40px rgba(201,168,76,0.3);letter-spacing:3px;line-height:1;}
.clock-date{font-size:11px;color:var(--text-dim);margin-top:7px;letter-spacing:1px;}
.clock-islamic{font-family:'Amiri',serif;font-size:16px;color:var(--gold-light);margin-top:5px;}
.fast-times{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:13px;}
.fast-box{background:var(--surface);border:1px solid var(--border);border-radius:13px;padding:15px;text-align:center;position:relative;overflow:hidden;}
.fast-box::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.fast-label{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);margin-bottom:6px;}
.fast-time{font-family:'Cinzel',serif;font-size:24px;font-weight:900;color:var(--gold);}
.fast-arabic{font-family:'Amiri',serif;font-size:12px;color:var(--gold-dim);margin-top:2px;}
.countdown-box{background:linear-gradient(135deg,rgba(201,168,76,0.07),rgba(201,168,76,0.01));border:1px solid var(--border);border-radius:13px;padding:16px;text-align:center;margin-bottom:13px;}
.countdown-label{font-size:9px;letter-spacing:2px;color:var(--text-dim);margin-bottom:5px;text-transform:uppercase;}
.countdown-val{font-family:'Cinzel',serif;font-size:28px;color:var(--gold);font-weight:900;}
.countdown-sub{font-size:10px;color:var(--text-dim);margin-top:3px;}
.cal-nav{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.cal-nav button{background:var(--surface2);border:1px solid var(--border);color:var(--gold);padding:5px 12px;border-radius:7px;cursor:pointer;font-size:15px;transition:.2s;}
.cal-month-label{font-family:'Cinzel',serif;color:var(--gold);font-size:14px;}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;}
.cal-hdr{text-align:center;font-size:9px;color:var(--gold-dim);padding:4px 1px;font-weight:700;letter-spacing:1px;}
.cal-day{background:var(--surface2);border:1px solid transparent;border-radius:7px;padding:4px 2px;text-align:center;cursor:pointer;transition:all .2s;min-height:50px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.cal-day.ramadan{background:rgba(201,168,76,0.04);}
.cal-day.laylatul{border-color:rgba(155,89,182,0.5);background:rgba(155,89,182,0.1);}
.cal-day.today{border-color:var(--gold) !important;background:rgba(201,168,76,0.14) !important;box-shadow:0 0 14px rgba(201,168,76,0.2);}
.cal-day-num{font-size:12px;font-weight:600;color:var(--text);}
.cal-day.today .cal-day-num{color:var(--gold);}
.cal-day.laylatul .cal-day-num{color:#c39bd3;}
.cal-hijri{font-family:'Amiri',serif;font-size:8px;color:var(--text-dim);margin-top:1px;}
.cal-badge{font-size:7px;font-weight:700;letter-spacing:.3px;}
.cal-day.empty{background:transparent;border:none;cursor:default;}
.legend{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:12px;margin-top:4px;}
.legend-item{display:flex;align-items:center;gap:4px;font-size:9px;color:var(--text-dim);}
.legend-dot{width:9px;height:9px;border-radius:2px;}
.prayer-row{display:flex;justify-content:space-between;align-items:center;padding:11px 14px;border-radius:9px;background:var(--surface2);margin-bottom:6px;border:1px solid transparent;transition:.2s;}
.prayer-row.sehri-row{border-color:rgba(100,200,255,0.25);background:rgba(100,200,255,0.03);}
.prayer-row.iftar-row{border-color:rgba(255,160,50,0.25);background:rgba(255,160,50,0.04);}
.prayer-row.current-prayer{border-color:var(--gold) !important;background:rgba(201,168,76,0.07) !important;}
.prayer-name{font-family:'Cinzel',serif;font-size:12px;color:var(--text);}
.prayer-arabic{font-family:'Amiri',serif;font-size:10px;color:var(--text-dim);}
.prayer-time-val{font-size:15px;color:var(--gold);font-weight:700;letter-spacing:1px;}
.badge{display:inline-block;padding:1px 5px;border-radius:20px;font-size:7px;font-weight:700;letter-spacing:1px;text-transform:uppercase;vertical-align:middle;margin-left:3px;}
.badge-now{background:rgba(46,204,113,0.15);color:var(--green);border:1px solid rgba(46,204,113,0.3);}
.badge-sehri{background:rgba(100,200,255,0.1);color:#6cc8ff;border:1px solid rgba(100,200,255,0.2);}
.badge-iftar{background:rgba(255,160,50,0.1);color:#ffa032;border:1px solid rgba(255,160,50,0.2);}
.city-tabs{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px;justify-content:center;}
.city-btn{padding:6px 12px;border-radius:16px;background:var(--surface2);border:1px solid var(--border);color:var(--text-dim);font-size:10px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:.2s;font-family:'Raleway',sans-serif;}
.city-btn.active{background:rgba(201,168,76,0.12);border-color:var(--gold);color:var(--gold);}
.region-info{background:var(--surface);border:1px solid var(--border);border-radius:13px;padding:14px;margin-bottom:12px;}
.region-title{font-family:'Cinzel',serif;font-size:15px;color:var(--gold);margin-bottom:2px;}
.region-tz{font-size:10px;color:var(--text-dim);}
.region-live-time{font-family:'Cinzel',serif;font-size:24px;color:var(--gold-light);}
.google-link{display:inline-flex;align-items:center;gap:5px;padding:8px 14px;border-radius:9px;background:rgba(66,133,244,0.1);border:1px solid rgba(66,133,244,0.3);color:#4285f4;font-size:10px;font-weight:600;text-decoration:none;transition:.2s;letter-spacing:.5px;}
.google-link:hover{background:rgba(66,133,244,0.2);}
.google-link-wrap{text-align:center;margin:10px 0;}
.quote-card{border-left:3px solid var(--gold);background:var(--surface);padding:13px 16px;border-radius:0 10px 10px 0;margin-bottom:9px;}
.quote-text{font-family:'Amiri',serif;font-size:14px;color:var(--text);line-height:1.7;}
.quote-src{font-size:9px;color:var(--gold-dim);margin-top:4px;letter-spacing:1px;}
.dua-card{background:linear-gradient(135deg,var(--surface),var(--surface2));border:1px solid var(--border);border-radius:13px;padding:18px;margin-bottom:13px;text-align:center;}
.dua-type{font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--gold-dim);margin-bottom:9px;}
.dua-arabic{font-family:'Amiri',serif;font-size:21px;color:var(--gold-light);line-height:1.8;margin-bottom:9px;direction:rtl;}
.dua-trans{font-size:11px;color:var(--text-dim);font-style:italic;line-height:1.6;}
.layl-card{background:linear-gradient(135deg,rgba(155,89,182,0.12),rgba(155,89,182,0.03));border:1px solid rgba(155,89,182,0.3);border-radius:13px;padding:15px;margin-bottom:10px;text-align:center;}
.layl-title{font-family:'Cinzel',serif;font-size:14px;color:#c39bd3;margin-bottom:5px;}
.layl-sub{font-size:11px;color:var(--text-dim);line-height:1.6;}
.layl-nights{display:flex;flex-wrap:wrap;gap:7px;justify-content:center;margin-top:10px;}
.layl-pill{padding:5px 11px;border-radius:18px;background:rgba(155,89,182,0.13);border:1px solid rgba(155,89,182,0.35);color:#c39bd3;font-size:10px;font-weight:600;font-family:'Cinzel',serif;text-align:center;}
.motiv-card{background:linear-gradient(135deg,var(--surface),var(--surface2));border:1px solid rgba(201,168,76,0.1);border-radius:13px;padding:16px;margin-bottom:9px;border-left:3px solid var(--gold);}
.motiv-icon{font-size:20px;margin-bottom:5px;}
.motiv-title{font-family:'Cinzel',serif;font-size:12px;color:var(--gold);margin-bottom:4px;}
.motiv-text{font-size:11px;color:var(--text-dim);line-height:1.7;}
.stats-row{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:12px;}
.stat-box{flex:1;min-width:65px;background:var(--surface);border:1px solid var(--border);border-radius:9px;padding:11px 7px;text-align:center;}
.stat-num{font-family:'Cinzel',serif;font-size:20px;color:var(--gold);font-weight:700;}
.stat-label{font-size:8px;color:var(--text-dim);margin-top:2px;letter-spacing:1px;text-transform:uppercase;}
.progress-bar-wrap{background:var(--surface2);border-radius:100px;height:6px;overflow:hidden;margin:6px 0;}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--gold-dim),var(--gold));border-radius:100px;transition:width .5s;}
.tracker-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:7px;}
.tracker-day{background:var(--surface2);border:1px solid var(--border);border-radius:9px;padding:9px 7px;text-align:center;}
.tracker-day.today-day{border-color:var(--gold);}
.tracker-day-label{font-size:9px;color:var(--text-dim);margin-bottom:6px;font-weight:600;}
.prayer-marks{display:flex;flex-direction:column;gap:3px;}
.prayer-mark{display:flex;justify-content:space-between;align-items:center;}
.prayer-mark-name{font-size:9px;color:var(--text-dim);}
.mark-btn{width:19px;height:19px;border-radius:50%;border:1px solid var(--border);background:none;cursor:pointer;font-size:9px;transition:.2s;display:flex;align-items:center;justify-content:center;}
.mark-btn.done{background:var(--green);border-color:var(--green);color:#fff;}
.mark-btn.missed{background:var(--red);border-color:var(--red);color:#fff;}
.btn{padding:10px 18px;border-radius:9px;border:1px solid var(--gold);background:rgba(201,168,76,0.08);color:var(--gold);font-family:'Raleway',sans-serif;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:.2s;}
.btn:hover{background:rgba(201,168,76,0.18);}
.btn.primary{background:var(--gold);color:var(--bg);}
.btn.primary:hover{background:var(--gold-light);}
.btn-row{display:flex;gap:7px;flex-wrap:wrap;margin-top:13px;}
.cta{text-align:center;padding:26px 14px;border-top:1px solid var(--border);margin-top:22px;}
.cta-name{font-family:'Cinzel',serif;font-size:15px;color:var(--gold);margin-bottom:4px;}
.cta-mail{color:var(--text-dim);font-size:11px;}
.cta-mail a{color:var(--gold-dim);text-decoration:none;}
.cta-mail a:hover{color:var(--gold);}
.city-time-row{display:flex;justify-content:space-between;align-items:center;padding:8px 13px;background:var(--surface2);border-radius:8px;margin-bottom:5px;border:1px solid var(--border);}
.city-label{font-size:10px;color:var(--text-dim);font-weight:600;}
.city-clock{font-family:'Cinzel',serif;font-size:14px;color:var(--gold);}
.moon-anim{text-align:center;font-size:48px;animation:moonFloat 4s ease-in-out infinite;margin-bottom:7px;}
@keyframes moonFloat{0%,100%{transform:translateY(0) rotate(-5deg);}50%{transform:translateY(-8px) rotate(5deg);}}
::-webkit-scrollbar{width:3px;}
::-webkit-scrollbar-thumb{background:var(--gold-dim);border-radius:2px;}
@media(min-width:580px){.clock-time{font-size:60px;}.fast-time{font-size:28px;}.tracker-grid{grid-template-columns:repeat(auto-fill,minmax(135px,1fr));}}

.fast-tracker-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:8px;}
.fast-day{background:var(--surface2);border:1px solid var(--border);border-radius:11px;padding:10px 7px;text-align:center;transition:.2s;}
.fast-day.today-fast{border-color:var(--gold);box-shadow:0 0 10px rgba(201,168,76,0.15);}
.fast-day.layl-fast{border-color:rgba(155,89,182,0.45);background:rgba(155,89,182,0.07);}
.fast-day-num{font-family:'Cinzel',serif;font-size:11px;color:var(--gold);font-weight:700;}
.fast-day-date{font-size:8px;color:var(--text-dim);margin-bottom:8px;margin-top:1px;}
.fast-btn-row{display:flex;gap:3px;justify-content:center;}
.fast-btn{width:28px;height:28px;border-radius:50%;border:1px solid var(--border);background:none;cursor:pointer;font-size:11px;transition:.2s;display:flex;align-items:center;justify-content:center;}
.fast-btn.kept{background:#2ecc71;border-color:#2ecc71;color:#fff;}
.fast-btn.missed{background:#e74c3c;border-color:#e74c3c;color:#fff;}
.fast-btn.exempt{background:#f39c12;border-color:#f39c12;color:#fff;}
.fast-status{font-size:7px;margin-top:5px;color:var(--text-dim);min-height:10px;}
.fast-status.kept{color:#2ecc71;}
.fast-status.missed{color:#e74c3c;}
.fast-status.exempt{color:#f39c12;}
.fstat-box{flex:1;min-width:60px;background:var(--surface);border:1px solid var(--border);border-radius:9px;padding:11px 6px;text-align:center;}
.fstat-num{font-family:'Cinzel',serif;font-size:20px;font-weight:700;}
.fstat-label{font-size:8px;color:var(--text-dim);margin-top:2px;letter-spacing:1px;text-transform:uppercase;}
.fast-legend{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-bottom:12px;}
.fl-item{display:flex;align-items:center;gap:5px;font-size:9px;color:var(--text-dim);}
.fl-dot{width:14px;height:14px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:8px;}
.month-summary-row{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--surface2);border-radius:9px;margin-bottom:6px;border:1px solid var(--border);}
.msr-label{font-family:'Cinzel',serif;font-size:12px;color:var(--text);}
.msr-val{display:flex;gap:8px;align-items:center;}
.msr-chip{padding:3px 9px;border-radius:20px;font-size:9px;font-weight:700;}
.msr-chip.kept{background:rgba(46,204,113,0.15);color:#2ecc71;border:1px solid rgba(46,204,113,0.3);}
.msr-chip.missed{background:rgba(231,76,60,0.15);color:#e74c3c;border:1px solid rgba(231,76,60,0.3);}
.msr-chip.exempt{background:rgba(243,156,18,0.15);color:#f39c12;border:1px solid rgba(243,156,18,0.3);}

/* ===== DOWNLOAD BUTTON ===== */
.dl-btn-wrap{position:fixed;bottom:20px;right:16px;z-index:9999;}
.dl-btn{display:flex;align-items:center;gap:6px;padding:11px 17px;border-radius:30px;background:linear-gradient(135deg,var(--gold),#9a7228);color:#04040a;font-family:'Raleway',sans-serif;font-size:10px;font-weight:800;letter-spacing:1px;text-transform:uppercase;border:none;cursor:pointer;box-shadow:0 4px 22px rgba(201,168,76,0.5);transition:all .25s;}
.dl-btn:hover{transform:translateY(-2px);box-shadow:0 6px 30px rgba(201,168,76,0.65);}
.dl-btn:active{transform:translateY(0);}
.dl-toast{position:fixed;bottom:75px;right:16px;z-index:9999;background:rgba(201,168,76,0.15);border:1px solid var(--gold);color:var(--gold);font-family:'Raleway',sans-serif;font-size:10px;font-weight:600;padding:8px 14px;border-radius:20px;letter-spacing:.5px;opacity:0;transition:opacity .3s;pointer-events:none;}
.dl-toast.show{opacity:1;}
</style>
</head>
<body>
<div class="stars" id="stars"></div>

<!-- DOWNLOAD BUTTON (fixed, bottom-right) -->
<div class="dl-btn-wrap">
  <button class="dl-btn" onclick="downloadApp()" title="Download for offline use">â¬‡ï¸ Download</button>
</div>
<div class="dl-toast" id="dlToast">âœ… Saved! Open the .html file anytime offline.</div>

<nav class="tab-bar">
  <button class="tab-btn active" onclick="showTab('calendar',this)">ğŸŒ™ Cal</button>
  <button class="tab-btn" onclick="showTab('rawalpindi',this)">ğŸ“ RWP</button>
  <button class="tab-btn" onclick="showTab('pakistan',this)">ğŸ‡µğŸ‡° PK</button>
  <button class="tab-btn" onclick="showTab('gulf',this)">ğŸŒ Gulf</button>
  <button class="tab-btn" onclick="showTab('world',this)">ğŸŒ World</button>
  <button class="tab-btn" onclick="showTab('tracker',this)">ğŸ“¿ Salah</button>
  <button class="tab-btn" onclick="showTab('fasttracker',this)">ğŸŒ™ Roza</button>
</nav>

<!-- CALENDAR -->
<div id="tab-calendar" class="panel active">
  <div class="moon-anim">ğŸŒ™</div>
  <div class="section-title">Ramadan 1447 AH</div>
  <div class="section-sub">19 February â€” 19 March 2026 Â· 1st Ramadan starts TODAY</div>
  <div class="card">
    <div class="clock-wrap">
      <div class="clock-city">ğŸ•Œ Rawalpindi / Islamabad â€” Pakistan Standard Time</div>
      <div class="clock-time" id="mainClock">--:--:--</div>
      <div class="clock-date" id="mainDate"></div>
      <div class="clock-islamic" id="islamicDate"></div>
    </div>
  </div>
  <div id="calFastTimes" class="fast-times"></div>
  <div class="countdown-box">
    <div class="countdown-label">â³ Time Until Next Prayer</div>
    <div class="countdown-val" id="nextCountdown">--:--:--</div>
    <div class="countdown-sub" id="nextLabel">Calculating...</div>
  </div>
  <div class="card">
    <div class="cal-nav">
      <button onclick="calPrev()">â€¹</button>
      <div class="cal-month-label" id="calMonthLabel"></div>
      <button onclick="calNext()">â€º</button>
    </div>
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background:rgba(201,168,76,0.5);border:1px solid var(--gold)"></div>Today</div>
      <div class="legend-item"><div class="legend-dot" style="background:rgba(201,168,76,0.07)"></div>Ramadan Day</div>
      <div class="legend-item"><div class="legend-dot" style="background:rgba(155,89,182,0.3);border:1px solid rgba(155,89,182,0.5)"></div>Laylatul Qadr Night</div>
    </div>
    <div class="calendar-grid" id="calHeaders"></div>
    <div class="calendar-grid" id="calGrid" style="margin-top:3px;"></div>
  </div>
  <div class="layl-card">
    <div class="layl-title">âœ¨ Laylatul Qadr â€” Night of Power</div>
    <div class="layl-sub">Seek it in the odd nights of the last 10 days. Better than 1,000 months (83 years) of worship. Marked âœ¨ on the calendar above.</div>
    <div class="layl-nights">
      <div class="layl-pill">21st Ramadan<br><small>Mar 11 night</small></div>
      <div class="layl-pill">23rd Ramadan<br><small>Mar 13 night</small></div>
      <div class="layl-pill">25th Ramadan<br><small>Mar 15 night</small></div>
      <div class="layl-pill">27th Ramadan<br><small>Mar 17 night</small></div>
      <div class="layl-pill">29th Ramadan<br><small>Mar 19 night</small></div>
    </div>
  </div>
  <div class="dua-card">
    <div class="dua-type">ğŸŒ… Dua of Sehri â€” Niyyah for Fasting</div>
    <div class="dua-arabic">ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ Ù…ÙÙ†Ù’ Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù</div>
    <div class="dua-trans">"I intend to keep the fast for tomorrow in the month of Ramadan."</div>
  </div>
  <div class="dua-card">
    <div class="dua-type">ğŸŒ‡ Dua of Iftari â€” Breaking the Fast</div>
    <div class="dua-arabic">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ÙÙ†ÙÙ‘ÛŒ Ù„ÙÚ©Ù ØµÙÙ…Ù’ØªÙ ÙˆÙØ¨ÙÚ©Ù Ø¢Ù…ÙÙ†Ù’ØªÙ ÙˆÙØ¹ÙÙ„ÙÙŠÙ’Ú©Ù ØªÙÙˆÙÚ©ÙÙ‘Ù„Ù’ØªÙ ÙˆÙØ¹ÙÙ„ÙÛŒ Ø±ÙØ²Ù’Ù‚ÙÚ©Ù Ø§ÙÙÙ’Ø·ÙØ±Ù’ØªÙ</div>
    <div class="dua-trans">"O Allah! I fasted for You and I believe in You and I put my trust in You and I break my fast with Your sustenance."</div>
  </div>
  <div class="quote-card"><div class="quote-text">Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø£ÙÙ†Ø²ÙÙ„Ù ÙÙÙŠÙ‡Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ù‡ÙØ¯Ù‹Ù‰ Ù„ÙÙ‘Ù„Ù†ÙÙ‘Ø§Ø³Ù<br>"The month of Ramadan in which the Quran was revealed as guidance for mankind."</div><div class="quote-src">â€” Quran 2:185</div></div>
  <div class="quote-card"><div class="quote-text">"When Ramadan enters, the gates of Paradise are opened, the gates of Hellfire are closed, and the devils are chained."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Bukhari &amp; Muslim</div></div>
  <div class="quote-card"><div class="quote-text">Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø±Ù Ø®ÙÙŠÙ’Ø±ÙŒ Ù…ÙÙ‘Ù†Ù’ Ø£ÙÙ„Ù’ÙÙ Ø´ÙÙ‡Ù’Ø±Ù â€” "The Night of Decree is better than a thousand months."</div><div class="quote-src">â€” Quran 97:3</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail">Ramadan 2026 Guide Â· <a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- RAWALPINDI -->
<div id="tab-rawalpindi" class="panel">
  <div class="section-title">ğŸ“ RWP</div>
  <div class="section-sub">Ramadan 1447 Â· 1st Roza: 19 February 2026</div>
  <div class="region-info">
    <div class="region-title">ğŸ“ Rawalpindi / Islamabad</div>
    <div class="region-tz">Pakistan Standard Time â€” UTC+5</div>
    <div class="region-live-time" id="rwpClock">--:--:--</div>
  </div>
  <div id="rwpFastTimes" class="fast-times"></div>
  <div class="google-link-wrap"><a class="google-link" href="https://www.google.com/search?q=prayer+times+rawalpindi+today" target="_blank">ğŸ” Live Prayer Times â€” Rawalpindi on Google</a></div>
  <div class="card">
    <div class="section-title" style="font-size:14px;margin-bottom:12px;">ğŸ•Œ Prayer Timings â€” Rawalpindi</div>
    <div id="rwpPrayers"></div>
  </div>
  <div class="layl-card">
    <div class="layl-title">âœ¨ Laylatul Qadr Nights â€” Rawalpindi</div>
    <div class="layl-sub">Stay awake, pray, make dua. These 5 nights could change your entire year.</div>
    <div class="layl-nights">
      <div class="layl-pill">21st Â· Mar 11</div><div class="layl-pill">23rd Â· Mar 13</div><div class="layl-pill">25th Â· Mar 15</div><div class="layl-pill">27th Â· Mar 17</div><div class="layl-pill">29th Â· Mar 19</div>
    </div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:11px;">ğŸŒŸ Ramadan in Rawalpindi</div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ•Œ</div><div class="motiv-title">Tarawih at Faisal Mosque</div><div class="motiv-text">Faisal Mosque holds massive Tarawih congregations all month. Thousands pray under the open sky â€” experience the spiritual energy of the Ummah at least once this Ramadan.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ“–</div><div class="motiv-title">Complete the Quran</div><div class="motiv-text">4 pages after each of the 5 daily prayers = complete Khatm in 30 days. Start today. By Eid ul Fitr you will have completed the Book of Allah once this blessed month.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ›</div><div class="motiv-title">Saddar Bazaar Iftar Culture</div><div class="motiv-text">Rawalpindi's streets come alive at Maghrib. Samosas, pakoras, channa chaat, dahi bhallay â€” the community spirit of Iftar in Pindi is something else entirely. Embrace it.</div></div>
  </div>
  <div class="quote-card"><div class="quote-text">"Take suhoor, for in suhoor there is blessing."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Bukhari &amp; Muslim</div></div>
  <div class="quote-card"><div class="quote-text">"Whoever fasts Ramadan out of faith and in the hope of reward, all his previous sins will be forgiven."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Bukhari</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail"><a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- PAKISTAN -->
<div id="tab-pakistan" class="panel">
  <div class="section-title">ğŸ‡µğŸ‡° PK</div>
  <div class="section-sub">All Major Cities Â· Ramadan 1447</div>
  <div class="city-tabs" id="pkTabs">
    <button class="city-btn active" onclick="showCity('pk','karachi',this)">ğŸŒŠ Karachi</button>
    <button class="city-btn" onclick="showCity('pk','lahore',this)">ğŸŒ¹ Lahore</button>
    <button class="city-btn" onclick="showCity('pk','peshawar',this)">ğŸ”ï¸ Peshawar</button>
    <button class="city-btn" onclick="showCity('pk','quetta',this)">ğŸœï¸ Quetta</button>
    <button class="city-btn" onclick="showCity('pk','multan',this)">â˜€ï¸ Multan</button>
  </div>
  <div class="region-info">
    <div class="region-title" id="pkCityName">ğŸŒŠ Karachi</div>
    <div class="region-tz">Pakistan Standard Time â€” UTC+5</div>
    <div class="region-live-time" id="pkClock">--:--:--</div>
  </div>
  <div id="pkFastTimes" class="fast-times"></div>
  <div class="google-link-wrap" id="pkGoogleLink"></div>
  <div class="card"><div id="pkPrayers"></div></div>
  <div class="layl-card">
    <div class="layl-title">âœ¨ Laylatul Qadr â€” Last 10 Nights</div>
    <div class="layl-sub">The Prophet ï·º would spend entire nights in worship during these 10 days. Search for this night especially on odd nights.</div>
    <div class="layl-nights"><div class="layl-pill">21st Â· Mar 11</div><div class="layl-pill">23rd Â· Mar 13</div><div class="layl-pill">25th Â· Mar 15</div><div class="layl-pill">27th Â· Mar 17</div><div class="layl-pill">29th Â· Mar 19</div></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:10px;">âœ¨ Ramadan Activities</div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ¤²</div><div class="motiv-title">Tahajjud Before Sehri</div><div class="motiv-text">Wake 30 minutes early. Pray 2â€“8 raka'at of Tahajjud. Make heartfelt dua. Allah descends to the lowest heaven in the last third of the night saying: "Who is calling upon Me that I may answer him?"</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ’</div><div class="motiv-title">Feed the Fasting</div><div class="motiv-text">"Whoever feeds a fasting person will have a reward equal to his." Even a single date and a glass of water earns this full reward. Set up a small Iftar dastarkhwan for your neighbours.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ“µ</div><div class="motiv-title">Digital Detox Hours</div><div class="motiv-text">Set 1 hour after Fajr and 1 hour after Maghrib as completely screen-free. Use this time for Quran, dhikr, or quiet reflection. The phone can wait. These moments are irreplaceable.</div></div>
  </div>
  <div class="quote-card"><div class="quote-text">ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙƒÙØªÙØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù Ø§Ù„ØµÙÙ‘ÙŠÙØ§Ù…Ù<br>"O believers, fasting has been prescribed for you as it was prescribed for those before you."</div><div class="quote-src">â€” Quran 2:183</div></div>
  <div class="quote-card"><div class="quote-text">"The dua of a fasting person at the time of breaking fast is not rejected."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Ibn Majah</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail"><a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- GULF -->
<div id="tab-gulf" class="panel">
  <div class="section-title">ğŸŒ Gulf &amp; Middle East</div>
  <div class="section-sub">UAE Â· Saudi Arabia Â· Turkey Â· Egypt</div>
  <div class="city-tabs" id="gulfTabs">
    <button class="city-btn active" onclick="showCity('gulf','dubai',this)">ğŸ‡¦ğŸ‡ª Dubai</button>
    <button class="city-btn" onclick="showCity('gulf','abudhabi',this)">ğŸ‡¦ğŸ‡ª Abu Dhabi</button>
    <button class="city-btn" onclick="showCity('gulf','riyadh',this)">ğŸ‡¸ğŸ‡¦ Riyadh</button>
    <button class="city-btn" onclick="showCity('gulf','mecca',this)">ğŸ•‹ Mecca</button>
    <button class="city-btn" onclick="showCity('gulf','istanbul',this)">ğŸ‡¹ğŸ‡· Istanbul</button>
    <button class="city-btn" onclick="showCity('gulf','cairo',this)">ğŸ‡ªğŸ‡¬ Cairo</button>
  </div>
  <div class="region-info">
    <div class="region-title" id="gulfCityName">ğŸ‡¦ğŸ‡ª Dubai</div>
    <div class="region-tz" id="gulfCityTZ">Gulf Standard Time â€” UTC+4</div>
    <div class="region-live-time" id="gulfClock">--:--:--</div>
  </div>
  <div id="gulfFastTimes" class="fast-times"></div>
  <div class="google-link-wrap" id="gulfGoogleLink"></div>
  <div class="card"><div id="gulfPrayers"></div></div>
  <div class="layl-card">
    <div class="layl-title">âœ¨ Laylatul Qadr in the Haramain</div>
    <div class="layl-sub">One prayer in Masjid al-Haram = 100,000 prayers. If you are in the Gulf, consider Umrah in the last 10 nights â€” the reward is beyond calculation. Umrah in Ramadan = reward of Hajj.</div>
    <div class="layl-nights"><div class="layl-pill">21st Â· Mar 11</div><div class="layl-pill">23rd Â· Mar 13</div><div class="layl-pill">25th Â· Mar 15</div><div class="layl-pill">27th Â· Mar 17</div><div class="layl-pill">29th Â· Mar 19</div></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:10px;">ğŸ•Œ Ramadan in the Gulf</div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ•‹</div><div class="motiv-title">Umrah During Last 10 Nights</div><div class="motiv-text">Umrah in Ramadan equals the reward of Hajj according to the hadith. If you are in the Gulf, this blessed proximity to the Haramain is a gift from Allah. Do not let it pass unused.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸŒƒ</div><div class="motiv-title">Dubai's Ramadan Majlis</div><div class="motiv-text">The UAE transforms completely at night. Community Iftars, charity tents, and majlis gatherings fill the city with light and brotherhood. Volunteer at a free Iftar â€” feeding thousands earns enormous reward.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ¤²</div><div class="motiv-title">Dua of Laylatul Qadr</div><div class="motiv-text">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø¹ÙÙÙÙˆÙŒÙ‘ ÙƒÙØ±ÙÙŠÙ…ÙŒ ØªÙØ­ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙÙÙ’ÙˆÙ ÙÙØ§Ø¹Ù’ÙÙ Ø¹ÙÙ†ÙÙ‘ÙŠ<br>"O Allah, You are the Pardoner, the Generous, You love to pardon, so pardon me." Repeat this in every odd night of the last 10 days.</div></div>
  </div>
  <div class="quote-card"><div class="quote-text">"There is a gate in Paradise called Ar-Raiyan. Those who observe fasts will enter through it on the Day of Resurrection and none except them."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Bukhari</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail"><a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- WORLD -->
<div id="tab-world" class="panel">
  <div class="section-title">ğŸŒ World Prayer Times</div>
  <div class="section-sub">USA Â· UK Â· Canada Â· Malaysia Â· Indonesia</div>
  <div class="city-tabs" id="worldTabs">
    <button class="city-btn active" onclick="showCity('world','newyork',this)">ğŸ‡ºğŸ‡¸ New York</button>
    <button class="city-btn" onclick="showCity('world','losangeles',this)">ğŸ‡ºğŸ‡¸ Los Angeles</button>
    <button class="city-btn" onclick="showCity('world','london',this)">ğŸ‡¬ğŸ‡§ London</button>
    <button class="city-btn" onclick="showCity('world','toronto',this)">ğŸ‡¨ğŸ‡¦ Toronto</button>
    <button class="city-btn" onclick="showCity('world','kualalumpur',this)">ğŸ‡²ğŸ‡¾ KL</button>
    <button class="city-btn" onclick="showCity('world','jakarta',this)">ğŸ‡®ğŸ‡© Jakarta</button>
  </div>
  <div class="region-info">
    <div class="region-title" id="worldCityName">ğŸ‡ºğŸ‡¸ New York</div>
    <div class="region-tz" id="worldCityTZ">Eastern Time â€” UTC-5</div>
    <div class="region-live-time" id="worldClock">--:--:--</div>
  </div>
  <div id="worldFastTimes" class="fast-times"></div>
  <div class="google-link-wrap" id="worldGoogleLink"></div>
  <div class="card"><div id="worldPrayers"></div></div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:10px;">ğŸŒ Live World Times</div>
    <div id="worldClocks"></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:10px;">ğŸ’« 1.9 Billion Fasting Together</div>
    <div class="motiv-card"><div class="motiv-icon">ğŸŒ</div><div class="motiv-title">The Global Ummah</div><div class="motiv-text">Right now, Muslims in 195 countries fast alongside you. Every hunger pang, every Fajr before sunrise, every act of charity â€” felt by nearly 2 billion hearts. You are never alone in this.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ™ï¸</div><div class="motiv-title">Fasting as a Minority</div><div class="motiv-text">Fasting in a non-Muslim country carries extra reward. You consciously choose your deen in an environment that doesn't facilitate it. That deliberate, steadfast choice is deeply beloved to Allah.</div></div>
    <div class="motiv-card"><div class="motiv-icon">ğŸ’°</div><div class="motiv-title">Give Zakat This Ramadan</div><div class="motiv-text">2.5% of savings held for one lunar year. Charity in Ramadan is multiplied 70 times compared to other months. Every dollar given this month is a monumental investment in the akhira.</div></div>
  </div>
  <div class="quote-card"><div class="quote-text">"Every action of the son of Adam is multiplied â€” good deeds by ten to seven hundred times. Allah says: Except fasting, for it is for Me and I shall reward it Myself."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Muslim</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail"><a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- TRACKER -->
<div id="tab-tracker" class="panel">
  <div class="section-title">ğŸ“¿ Prayer Tracker</div>
  <div class="section-sub">Ramadan 1447 Â· 19 Feb â€“ 19 Mar 2026</div>
  <div class="stats-row">
    <div class="stat-box"><div class="stat-num" id="statDone">0</div><div class="stat-label">Performed</div></div>
    <div class="stat-box"><div class="stat-num" id="statMissed" style="color:var(--red)">0</div><div class="stat-label">Missed</div></div>
    <div class="stat-box"><div class="stat-num" id="statPct">0%</div><div class="stat-label">Completion</div></div>
    <div class="stat-box"><div class="stat-num" id="statDays">0</div><div class="stat-label">Days Logged</div></div>
  </div>
  <div class="progress-bar-wrap"><div class="progress-bar" id="progBar" style="width:0%"></div></div>
  <div style="text-align:center;font-size:9px;color:var(--text-dim);margin-bottom:12px;">Overall Ramadan Prayer Completion</div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:4px;">Today's Prayers</div>
    <div style="text-align:center;font-size:10px;color:var(--text-dim);margin-bottom:12px;" id="todayTrackerLabel"></div>
    <div id="todayRows"></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:4px;">Full 30-Day Record</div>
    <div style="text-align:center;font-size:9px;color:var(--text-dim);margin-bottom:12px;">âœ¨ = Laylatul Qadr night Â· Tap âœ“ or âœ— to log</div>
    <div style="overflow-x:auto;"><div class="tracker-grid" id="fullGrid"></div></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:9px;">ğŸ’¾ Save &amp; Backup Data</div>
    <p style="font-size:11px;color:var(--text-dim);margin-bottom:12px;line-height:1.7;">Data saves automatically in your browser. Export a JSON file to keep it safe across devices. Import any time to restore your complete prayer record.</p>
    <div class="btn-row">
      <button class="btn primary" onclick="exportData()">â¬‡ï¸ Export Backup</button>
      <button class="btn" onclick="document.getElementById('importFile').click()">â¬†ï¸ Import</button>
      <button class="btn" onclick="copyJSON()">ğŸ“‹ Copy JSON</button>
    </div>
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
    <div id="backupStatus" style="margin-top:9px;font-size:10px;color:var(--text-dim);"></div>
  </div>
  <div class="quote-card"><div class="quote-text">"The first matter that the slave will be brought to account for on the Day of Judgment is the prayer. If it is sound, then the rest of his deeds will be sound."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· at-Tabarani</div></div>
  <div class="quote-card"><div class="quote-text">Ø¥ÙÙ†ÙÙ‘ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù ØªÙÙ†Ù’Ù‡ÙÙ‰Ù° Ø¹ÙÙ†Ù Ø§Ù„Ù’ÙÙØ­Ù’Ø´ÙØ§Ø¡Ù ÙˆÙØ§Ù„Ù’Ù…ÙÙ†ÙƒÙØ±Ù â€” "Indeed, prayer prohibits immorality and wrongdoing."</div><div class="quote-src">â€” Quran 29:45</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail">Ramadan 2026 Tracker Â· <a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>

<!-- FAST TRACKER -->
<div id="tab-fasttracker" class="panel">
  <div class="section-title">ğŸŒ™ Fast Tracker</div>
  <div class="section-sub">Ramadan 1447 Â· Mark &amp; save every roza</div>
  <div class="stats-row" id="fastStatsRow">
    <div class="fstat-box"><div class="fstat-num" id="fstatKept" style="color:var(--green)">0</div><div class="fstat-label">Kept</div></div>
    <div class="fstat-box"><div class="fstat-num" id="fstatMissed" style="color:var(--red)">0</div><div class="fstat-label">Missed</div></div>
    <div class="fstat-box"><div class="fstat-num" id="fstatExempt" style="color:#f39c12">0</div><div class="fstat-label">Exempt</div></div>
    <div class="fstat-box"><div class="fstat-num" id="fstatRemain" style="color:var(--gold)">30</div><div class="fstat-label">Remaining</div></div>
  </div>
  <div class="progress-bar-wrap" style="margin-bottom:4px;"><div class="progress-bar" id="fastProgBar" style="width:0%;background:linear-gradient(90deg,#2ecc71,#27ae60);"></div></div>
  <div style="text-align:center;font-size:9px;color:var(--text-dim);margin-bottom:14px;">Fasts Kept â€” Ramadan 1447</div>
  <div class="card" id="todayFastCard">
    <div class="section-title" style="font-size:13px;margin-bottom:4px;">Today's Fast</div>
    <div style="text-align:center;font-size:10px;color:var(--text-dim);margin-bottom:14px;" id="todayFastLabel"></div>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
      <button onclick="setTodayFast('kept')" id="fbKept" style="flex:1;min-width:90px;padding:14px 10px;border-radius:12px;border:1px solid rgba(46,204,113,0.3);background:rgba(46,204,113,0.07);color:#2ecc71;font-family:'Raleway',sans-serif;font-size:11px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:.2s;">âœ… Kept</button>
      <button onclick="setTodayFast('missed')" id="fbMissed" style="flex:1;min-width:90px;padding:14px 10px;border-radius:12px;border:1px solid rgba(231,76,60,0.3);background:rgba(231,76,60,0.07);color:#e74c3c;font-family:'Raleway',sans-serif;font-size:11px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:.2s;">âŒ Missed</button>
      <button onclick="setTodayFast('exempt')" id="fbExempt" style="flex:1;min-width:90px;padding:14px 10px;border-radius:12px;border:1px solid rgba(243,156,18,0.3);background:rgba(243,156,18,0.07);color:#f39c12;font-family:'Raleway',sans-serif;font-size:11px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:.2s;">ğŸŸ¡ Exempt</button>
    </div>
    <div style="text-align:center;margin-top:12px;font-size:11px;color:var(--text-dim);" id="todayFastStatus"></div>
  </div>
  <div class="fast-legend">
    <div class="fl-item"><div class="fl-dot" style="background:#2ecc71;">âœ“</div>Kept</div>
    <div class="fl-item"><div class="fl-dot" style="background:#e74c3c;">âœ—</div>Missed</div>
    <div class="fl-item"><div class="fl-dot" style="background:#f39c12;">~</div>Exempt (travel/illness)</div>
    <div class="fl-item"><div class="fl-dot" style="background:rgba(201,168,76,0.15);border:1px solid rgba(201,168,76,0.3);">â—‹</div>Not logged</div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:4px;">30-Day Fast Record</div>
    <div style="text-align:center;font-size:9px;color:var(--text-dim);margin-bottom:12px;">âœ¨ = Laylatul Qadr Â· Tap each button to cycle: â—‹ â†’ âœ“ â†’ âœ— â†’ ~ â†’ â—‹</div>
    <div class="fast-tracker-grid" id="fastGrid"></div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:4px;">ğŸ“Š Monthly Summary</div>
    <div style="text-align:center;font-size:9px;color:var(--text-dim);margin-bottom:12px;">Complete breakdown of your Ramadan 1447 fasts</div>
    <div id="monthlySummary"></div>
  </div>
  <div class="card" style="border-color:rgba(243,156,18,0.25);background:rgba(243,156,18,0.04);">
    <div style="font-family:'Cinzel',serif;font-size:12px;color:#f39c12;margin-bottom:8px;">ğŸ“ Qada (Make-up) Fasts</div>
    <div style="font-size:11px;color:var(--text-dim);line-height:1.8;" id="qadaNote">Log your fasts above to see how many Qada fasts you need to make up.</div>
  </div>
  <div class="card">
    <div class="section-title" style="font-size:13px;margin-bottom:9px;">ğŸ’¾ Save Fast Data</div>
    <p style="font-size:11px;color:var(--text-dim);margin-bottom:12px;line-height:1.7;">Your fast record saves automatically. Export to keep it safe. Import on any device to restore.</p>
    <div class="btn-row">
      <button class="btn primary" onclick="exportFastData()">â¬‡ï¸ Export</button>
      <button class="btn" onclick="document.getElementById('importFastFile').click()">â¬†ï¸ Import</button>
      <button class="btn" onclick="copyFastJSON()">ğŸ“‹ Copy</button>
    </div>
    <input type="file" id="importFastFile" accept=".json" style="display:none" onchange="importFastData(event)">
    <div id="fastBackupStatus" style="margin-top:9px;font-size:10px;color:var(--text-dim);"></div>
  </div>
  <div class="quote-card"><div class="quote-text">Ù…ÙÙ†Ù’ ØµÙØ§Ù…Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ø¥ÙÙŠÙ…ÙØ§Ù†Ù‹Ø§ ÙˆÙØ§Ø­Ù’ØªÙØ³ÙØ§Ø¨Ù‹Ø§ ØºÙÙÙØ±Ù Ù„ÙÙ‡Ù Ù…ÙØ§ ØªÙÙ‚ÙØ¯ÙÙ‘Ù…Ù Ù…ÙÙ†Ù’ Ø°ÙÙ†Ù’Ø¨ÙÙ‡Ù<br>"Whoever fasts Ramadan out of faith and in the hope of reward, all his previous sins will be forgiven."</div><div class="quote-src">â€” Prophet Muhammad ï·º Â· Sahih Bukhari</div></div>
  <div class="quote-card"><div class="quote-text">"Every action of the son of Adam is for himself except fasting â€” it is for Me and I shall reward it."</div><div class="quote-src">â€” Hadith Qudsi Â· Sahih Bukhari &amp; Muslim</div></div>
  <div class="cta"><div class="cta-name">Maria Kanwal</div><div class="cta-mail">Ramadan 1447 Fast Tracker Â· <a href="mailto:medrankseo@gmail.com">medrankseo@gmail.com</a></div></div>
</div>


<script>
// STARS
(function(){const c=document.getElementById('stars');for(let i=0;i<70;i++){const s=document.createElement('div');s.className='star';const sz=Math.random()*2+.5;s.style.cssText=`width:${sz}px;height:${sz}px;left:${Math.random()*100}%;top:${Math.random()*100}%;--d:${2+Math.random()*5}s;--delay:${Math.random()*5}s;opacity:${Math.random()*.4};`;c.appendChild(s);}})();

// CITY DATA
const CITIES={
  rawalpindi:{name:'Rawalpindi',flag:'ğŸ“',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times rawalpindi today',sehri:'05:24 AM',iftar:'05:57 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:24',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:24'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'06:43'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:24'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:52'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'17:57',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:26'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'19:50'}]},
  karachi:{name:'Karachi',flag:'ğŸŒŠ',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times karachi today',sehri:'05:46 AM',iftar:'06:29 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:46',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:46'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'07:01'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:30'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:56'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'18:29',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:51'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'20:15'}]},
  lahore:{name:'Lahore',flag:'ğŸŒ¹',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times lahore today',sehri:'05:18 AM',iftar:'05:54 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:18',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:18'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'06:37'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:22'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:50'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'17:54',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:21'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'19:45'}]},
  peshawar:{name:'Peshawar',flag:'ğŸ”ï¸',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times peshawar today',sehri:'05:09 AM',iftar:'05:47 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:09',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:09'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'06:28'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:18'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:45'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'17:47',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:15'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'19:40'}]},
  quetta:{name:'Quetta',flag:'ğŸœï¸',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times quetta today',sehri:'05:30 AM',iftar:'06:07 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:30',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:30'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'06:50'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:31'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:58'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'18:07',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:34'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'19:58'}]},
  multan:{name:'Multan',flag:'â˜€ï¸',tz:'Asia/Karachi',tzLabel:'PKT â€” UTC+5',googleQ:'prayer times multan today',sehri:'05:22 AM',iftar:'06:01 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­Ø±ÛŒ',t:'05:22',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:22'},{n:'Sunrise',a:'Ø·Ù„ÙˆØ¹',t:'06:41'},{n:'Dhuhr',a:'Ø¸ÛØ±',t:'12:24'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:52'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø§ÙØ·Ø§Ø±',t:'18:01',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:27'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÛŒØ­',t:'19:50'}]},
  dubai:{name:'Dubai',flag:'ğŸ‡¦ğŸ‡ª',tz:'Asia/Dubai',tzLabel:'GST â€” UTC+4',googleQ:'prayer times dubai today',sehri:'05:42 AM',iftar:'06:06 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­ÙˆØ±',t:'05:42',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:42'},{n:'Sunrise',a:'Ø´Ø±ÙˆÙ‚',t:'06:53'},{n:'Dhuhr',a:'Ø¸Ù‡Ø±',t:'12:31'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:51'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'18:06',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:24'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'19:50'}]},
  abudhabi:{name:'Abu Dhabi',flag:'ğŸ‡¦ğŸ‡ª',tz:'Asia/Dubai',tzLabel:'GST â€” UTC+4',googleQ:'prayer times abu dhabi today',sehri:'05:43 AM',iftar:'06:07 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­ÙˆØ±',t:'05:43',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:43'},{n:'Sunrise',a:'Ø´Ø±ÙˆÙ‚',t:'06:54'},{n:'Dhuhr',a:'Ø¸Ù‡Ø±',t:'12:31'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:52'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'18:07',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:25'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'19:51'}]},
  riyadh:{name:'Riyadh',flag:'ğŸ‡¸ğŸ‡¦',tz:'Asia/Riyadh',tzLabel:'AST â€” UTC+3',googleQ:'prayer times riyadh today',sehri:'05:41 AM',iftar:'06:13 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­ÙˆØ±',t:'05:41',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:41'},{n:'Sunrise',a:'Ø´Ø±ÙˆÙ‚',t:'06:55'},{n:'Dhuhr',a:'Ø¸Ù‡Ø±',t:'12:21'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:44'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'18:13',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:37'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'20:00'}]},
  mecca:{name:'Mecca',flag:'ğŸ•‹',tz:'Asia/Riyadh',tzLabel:'AST â€” UTC+3',googleQ:'prayer times mecca makkah today',sehri:'05:41 AM',iftar:'06:13 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­ÙˆØ±',t:'05:41',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'05:41'},{n:'Sunrise',a:'Ø´Ø±ÙˆÙ‚',t:'06:54'},{n:'Dhuhr',a:'Ø¸Ù‡Ø±',t:'12:27'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:47'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'18:13',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:37'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'20:00'}]},
  istanbul:{name:'Istanbul',flag:'ğŸ‡¹ğŸ‡·',tz:'Europe/Istanbul',tzLabel:'TRT â€” UTC+3',googleQ:'prayer times istanbul today',sehri:'06:37 AM',iftar:'06:26 PM',
    prayers:[{n:'Sehri / Ä°msak',a:'Ø³Ø­ÙˆØ± / Ä°msak',t:'06:37',type:'sehri'},{n:'Fajr / Fecr',a:'ÙØ¬Ø±',t:'06:37'},{n:'Sunrise / GÃ¼neÅŸ',a:'Ø´Ø±ÙˆÙ‚',t:'08:04'},{n:'Dhuhr / Ã–ÄŸle',a:'Ø¸Ù‡Ø±',t:'13:08'},{n:'Asr / Ä°kindi',a:'Ø¹ØµØ±',t:'16:16'},{n:'Maghrib / Ä°ftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'18:26',type:'iftar'},{n:'Isha / YatsÄ±',a:'Ø¹Ø´Ø§Ø¡',t:'19:47'},{n:'Tarawih / Teravih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'20:15'}]},
  cairo:{name:'Cairo',flag:'ğŸ‡ªğŸ‡¬',tz:'Africa/Cairo',tzLabel:'EET â€” UTC+2',googleQ:'prayer times cairo today',sehri:'04:49 AM',iftar:'05:48 PM',
    prayers:[{n:'Sehri Ends',a:'Ø³Ø­ÙˆØ±',t:'04:49',type:'sehri'},{n:'Fajr',a:'ÙØ¬Ø±',t:'04:49'},{n:'Sunrise',a:'Ø´Ø±ÙˆÙ‚',t:'06:10'},{n:'Dhuhr',a:'Ø¸Ù‡Ø±',t:'12:01'},{n:'Asr',a:'Ø¹ØµØ±',t:'15:17'},{n:'Maghrib / Iftar',a:'Ù…ØºØ±Ø¨ / Ø¥ÙØ·Ø§Ø±',t:'17:48',type:'iftar'},{n:'Isha',a:'Ø¹Ø´Ø§Ø¡',t:'19:08'},{n:'Tarawih',a:'ØªØ±Ø§ÙˆÙŠØ­',t:'19:35'}]},
  newyork:{name:'New York',flag:'ğŸ‡ºğŸ‡¸',tz:'America/New_York',tzLabel:'EST â€” UTC-5',googleQ:'prayer times new york today',sehri:'05:29 AM',iftar:'05:19 PM',
    prayers:[{n:'Sehri Ends',a:'Sehri',t:'05:29',type:'sehri'},{n:'Fajr',a:'Fajr',t:'05:29'},{n:'Sunrise',a:'Sunrise',t:'06:47'},{n:'Dhuhr',a:'Dhuhr',t:'12:19'},{n:'Asr',a:'Asr',t:'15:23'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'17:19',type:'iftar'},{n:'Isha',a:'Isha',t:'18:43'},{n:'Tarawih',a:'Tarawih',t:'19:10'}]},
  losangeles:{name:'Los Angeles',flag:'ğŸ‡ºğŸ‡¸',tz:'America/Los_Angeles',tzLabel:'PST â€” UTC-8',googleQ:'prayer times los angeles today',sehri:'05:44 AM',iftar:'05:47 PM',
    prayers:[{n:'Sehri Ends',a:'Sehri',t:'05:44',type:'sehri'},{n:'Fajr',a:'Fajr',t:'05:44'},{n:'Sunrise',a:'Sunrise',t:'06:58'},{n:'Dhuhr',a:'Dhuhr',t:'12:30'},{n:'Asr',a:'Asr',t:'15:44'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'17:47',type:'iftar'},{n:'Isha',a:'Isha',t:'19:06'},{n:'Tarawih',a:'Tarawih',t:'19:35'}]},
  london:{name:'London',flag:'ğŸ‡¬ğŸ‡§',tz:'Europe/London',tzLabel:'GMT â€” UTC+0',googleQ:'prayer times london today',sehri:'05:38 AM',iftar:'04:57 PM',
    prayers:[{n:'Sehri Ends',a:'Sehri',t:'05:38',type:'sehri'},{n:'Fajr',a:'Fajr',t:'05:38'},{n:'Sunrise',a:'Sunrise',t:'07:11'},{n:'Dhuhr',a:'Dhuhr',t:'12:18'},{n:'Asr',a:'Asr',t:'15:05'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'16:57',type:'iftar'},{n:'Isha',a:'Isha',t:'18:27'},{n:'Tarawih',a:'Tarawih',t:'19:00'}]},
  toronto:{name:'Toronto',flag:'ğŸ‡¨ğŸ‡¦',tz:'America/Toronto',tzLabel:'EST â€” UTC-5',googleQ:'prayer times toronto today',sehri:'05:32 AM',iftar:'05:25 PM',
    prayers:[{n:'Sehri Ends',a:'Sehri',t:'05:32',type:'sehri'},{n:'Fajr',a:'Fajr',t:'05:32'},{n:'Sunrise',a:'Sunrise',t:'06:51'},{n:'Dhuhr',a:'Dhuhr',t:'12:20'},{n:'Asr',a:'Asr',t:'15:23'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'17:25',type:'iftar'},{n:'Isha',a:'Isha',t:'18:48'},{n:'Tarawih',a:'Tarawih',t:'19:15'}]},
  kualalumpur:{name:'Kuala Lumpur',flag:'ğŸ‡²ğŸ‡¾',tz:'Asia/Kuala_Lumpur',tzLabel:'MYT â€” UTC+8',googleQ:'prayer times kuala lumpur today',sehri:'06:01 AM',iftar:'07:24 PM',
    prayers:[{n:'Sehri / Imsak',a:'Sehri',t:'06:01',type:'sehri'},{n:'Fajr / Subuh',a:'Subuh',t:'06:01'},{n:'Sunrise / Syuruk',a:'Syuruk',t:'07:17'},{n:'Dhuhr / Zohor',a:'Zohor',t:'13:20'},{n:'Asr / Asar',a:'Asar',t:'16:36'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'19:24',type:'iftar'},{n:'Isha / Isyak',a:'Isyak',t:'20:34'},{n:'Tarawih',a:'Tarawih',t:'21:00'}]},
  jakarta:{name:'Jakarta',flag:'ğŸ‡®ğŸ‡©',tz:'Asia/Jakarta',tzLabel:'WIB â€” UTC+7',googleQ:'prayer times jakarta today',sehri:'04:35 AM',iftar:'06:03 PM',
    prayers:[{n:'Sehri / Imsak',a:'Imsak',t:'04:35',type:'sehri'},{n:'Fajr / Subuh',a:'Subuh',t:'04:35'},{n:'Sunrise / Terbit',a:'Terbit',t:'05:53'},{n:'Dhuhr / Dzuhur',a:'Dzuhur',t:'11:58'},{n:'Asr / Ashar',a:'Ashar',t:'15:14'},{n:'Maghrib / Iftar',a:'Maghrib / Iftar',t:'18:03',type:'iftar'},{n:'Isha / Isya',a:'Isya',t:'19:12'},{n:'Tarawih',a:'Tarawih',t:'19:40'}]}
};

const SCHEDULE={
  rawalpindi:[['05:24 AM','05:57 PM'],['05:23 AM','05:58 PM'],['05:22 AM','05:59 PM'],['05:21 AM','06:00 PM'],['05:20 AM','06:01 PM'],['05:19 AM','06:02 PM'],['05:18 AM','06:03 PM'],['05:17 AM','06:04 PM'],['05:16 AM','06:05 PM'],['05:14 AM','06:06 PM'],['05:13 AM','06:07 PM'],['05:12 AM','06:08 PM'],['05:11 AM','06:09 PM'],['05:09 AM','06:10 PM'],['05:08 AM','06:11 PM'],['05:07 AM','06:12 PM'],['05:05 AM','06:13 PM'],['05:04 AM','06:14 PM'],['05:03 AM','06:15 PM'],['05:01 AM','06:16 PM'],['05:00 AM','06:17 PM'],['04:58 AM','06:18 PM'],['04:57 AM','06:19 PM'],['04:55 AM','06:20 PM'],['04:54 AM','06:21 PM'],['04:52 AM','06:22 PM'],['04:51 AM','06:23 PM'],['04:49 AM','06:24 PM'],['04:48 AM','06:25 PM'],['04:46 AM','06:26 PM']],
  karachi:[['05:46 AM','06:29 PM'],['05:45 AM','06:30 PM'],['05:44 AM','06:31 PM'],['05:43 AM','06:32 PM'],['05:42 AM','06:33 PM'],['05:41 AM','06:34 PM'],['05:40 AM','06:34 PM'],['05:39 AM','06:35 PM'],['05:38 AM','06:36 PM'],['05:37 AM','06:37 PM'],['05:36 AM','06:38 PM'],['05:35 AM','06:38 PM'],['05:34 AM','06:39 PM'],['05:33 AM','06:40 PM'],['05:32 AM','06:41 PM'],['05:31 AM','06:42 PM'],['05:30 AM','06:42 PM'],['05:29 AM','06:43 PM'],['05:28 AM','06:44 PM'],['05:27 AM','06:45 PM'],['05:26 AM','06:45 PM'],['05:25 AM','06:46 PM'],['05:24 AM','06:47 PM'],['05:23 AM','06:48 PM'],['05:21 AM','06:48 PM'],['05:20 AM','06:49 PM'],['05:19 AM','06:50 PM'],['05:18 AM','06:51 PM'],['05:17 AM','06:51 PM'],['05:16 AM','06:52 PM']],
  lahore:[['05:18 AM','05:54 PM'],['05:17 AM','05:55 PM'],['05:16 AM','05:56 PM'],['05:15 AM','05:57 PM'],['05:14 AM','05:58 PM'],['05:13 AM','05:59 PM'],['05:12 AM','06:00 PM'],['05:11 AM','06:01 PM'],['05:10 AM','06:02 PM'],['05:08 AM','06:03 PM'],['05:07 AM','06:04 PM'],['05:06 AM','06:05 PM'],['05:05 AM','06:06 PM'],['05:03 AM','06:07 PM'],['05:02 AM','06:08 PM'],['05:01 AM','06:09 PM'],['04:59 AM','06:10 PM'],['04:58 AM','06:11 PM'],['04:57 AM','06:12 PM'],['04:55 AM','06:13 PM'],['04:54 AM','06:14 PM'],['04:52 AM','06:15 PM'],['04:51 AM','06:16 PM'],['04:49 AM','06:17 PM'],['04:48 AM','06:18 PM'],['04:46 AM','06:19 PM'],['04:44 AM','06:20 PM'],['04:43 AM','06:21 PM'],['04:41 AM','06:22 PM'],['04:40 AM','06:22 PM']],
  peshawar:[['05:09 AM','05:47 PM'],['05:08 AM','05:48 PM'],['05:07 AM','05:49 PM'],['05:06 AM','05:50 PM'],['05:05 AM','05:51 PM'],['05:04 AM','05:52 PM'],['05:03 AM','05:53 PM'],['05:02 AM','05:54 PM'],['05:00 AM','05:55 PM'],['04:59 AM','05:56 PM'],['04:58 AM','05:57 PM'],['04:56 AM','05:58 PM'],['04:55 AM','05:59 PM'],['04:54 AM','06:00 PM'],['04:52 AM','06:01 PM'],['04:51 AM','06:02 PM'],['04:49 AM','06:03 PM'],['04:48 AM','06:04 PM'],['04:46 AM','06:05 PM'],['04:45 AM','06:06 PM'],['04:43 AM','06:07 PM'],['04:42 AM','06:08 PM'],['04:40 AM','06:09 PM'],['04:38 AM','06:10 PM'],['04:37 AM','06:11 PM'],['04:35 AM','06:12 PM'],['04:34 AM','06:13 PM'],['04:32 AM','06:14 PM'],['04:30 AM','06:15 PM'],['04:29 AM','06:16 PM']],
  quetta:[['05:30 AM','06:07 PM'],['05:29 AM','06:08 PM'],['05:28 AM','06:09 PM'],['05:27 AM','06:10 PM'],['05:26 AM','06:11 PM'],['05:25 AM','06:12 PM'],['05:24 AM','06:13 PM'],['05:23 AM','06:14 PM'],['05:22 AM','06:15 PM'],['05:21 AM','06:16 PM'],['05:19 AM','06:17 PM'],['05:18 AM','06:18 PM'],['05:17 AM','06:19 PM'],['05:16 AM','06:20 PM'],['05:14 AM','06:21 PM'],['05:13 AM','06:22 PM'],['05:12 AM','06:23 PM'],['05:10 AM','06:24 PM'],['05:09 AM','06:25 PM'],['05:08 AM','06:26 PM'],['05:06 AM','06:27 PM'],['05:05 AM','06:28 PM'],['05:03 AM','06:29 PM'],['05:02 AM','06:30 PM'],['05:00 AM','06:31 PM'],['04:59 AM','06:32 PM'],['04:57 AM','06:33 PM'],['04:56 AM','06:34 PM'],['04:54 AM','06:35 PM'],['04:53 AM','06:36 PM']],
  multan:[['05:22 AM','06:01 PM'],['05:21 AM','06:02 PM'],['05:20 AM','06:03 PM'],['05:19 AM','06:04 PM'],['05:18 AM','06:05 PM'],['05:17 AM','06:06 PM'],['05:16 AM','06:07 PM'],['05:15 AM','06:08 PM'],['05:14 AM','06:09 PM'],['05:12 AM','06:10 PM'],['05:11 AM','06:11 PM'],['05:10 AM','06:12 PM'],['05:09 AM','06:13 PM'],['05:07 AM','06:14 PM'],['05:06 AM','06:15 PM'],['05:05 AM','06:16 PM'],['05:03 AM','06:17 PM'],['05:02 AM','06:18 PM'],['05:00 AM','06:19 PM'],['04:59 AM','06:20 PM'],['04:58 AM','06:21 PM'],['04:56 AM','06:22 PM'],['04:55 AM','06:23 PM'],['04:53 AM','06:24 PM'],['04:52 AM','06:25 PM'],['04:50 AM','06:26 PM'],['04:48 AM','06:27 PM'],['04:47 AM','06:28 PM'],['04:45 AM','06:29 PM'],['04:44 AM','06:29 PM']],
  dubai:[['05:42 AM','06:06 PM'],['05:41 AM','06:07 PM'],['05:40 AM','06:08 PM'],['05:39 AM','06:09 PM'],['05:38 AM','06:10 PM'],['05:37 AM','06:11 PM'],['05:36 AM','06:12 PM'],['05:35 AM','06:12 PM'],['05:34 AM','06:13 PM'],['05:33 AM','06:14 PM'],['05:32 AM','06:15 PM'],['05:31 AM','06:16 PM'],['05:30 AM','06:17 PM'],['05:29 AM','06:17 PM'],['05:28 AM','06:18 PM'],['05:27 AM','06:19 PM'],['05:26 AM','06:20 PM'],['05:24 AM','06:21 PM'],['05:23 AM','06:21 PM'],['05:22 AM','06:22 PM'],['05:21 AM','06:23 PM'],['05:20 AM','06:24 PM'],['05:18 AM','06:24 PM'],['05:17 AM','06:25 PM'],['05:16 AM','06:26 PM'],['05:15 AM','06:27 PM'],['05:13 AM','06:27 PM'],['05:12 AM','06:28 PM'],['05:11 AM','06:29 PM'],['05:09 AM','06:30 PM']],
  abudhabi:[['05:43 AM','06:07 PM'],['05:42 AM','06:08 PM'],['05:41 AM','06:09 PM'],['05:40 AM','06:10 PM'],['05:39 AM','06:11 PM'],['05:38 AM','06:11 PM'],['05:37 AM','06:12 PM'],['05:36 AM','06:13 PM'],['05:35 AM','06:14 PM'],['05:34 AM','06:15 PM'],['05:32 AM','06:15 PM'],['05:31 AM','06:16 PM'],['05:30 AM','06:17 PM'],['05:29 AM','06:18 PM'],['05:28 AM','06:19 PM'],['05:27 AM','06:19 PM'],['05:26 AM','06:20 PM'],['05:24 AM','06:21 PM'],['05:23 AM','06:22 PM'],['05:22 AM','06:22 PM'],['05:21 AM','06:23 PM'],['05:19 AM','06:24 PM'],['05:18 AM','06:25 PM'],['05:17 AM','06:25 PM'],['05:15 AM','06:26 PM'],['05:14 AM','06:27 PM'],['05:13 AM','06:28 PM'],['05:11 AM','06:28 PM'],['05:10 AM','06:29 PM'],['05:09 AM','06:30 PM']],
  riyadh:[['05:41 AM','06:13 PM'],['05:40 AM','06:14 PM'],['05:39 AM','06:15 PM'],['05:38 AM','06:16 PM'],['05:37 AM','06:16 PM'],['05:36 AM','06:17 PM'],['05:35 AM','06:18 PM'],['05:34 AM','06:19 PM'],['05:33 AM','06:19 PM'],['05:32 AM','06:20 PM'],['05:31 AM','06:21 PM'],['05:29 AM','06:22 PM'],['05:28 AM','06:22 PM'],['05:27 AM','06:23 PM'],['05:26 AM','06:24 PM'],['05:25 AM','06:25 PM'],['05:24 AM','06:25 PM'],['05:22 AM','06:26 PM'],['05:21 AM','06:27 PM'],['05:20 AM','06:28 PM'],['05:19 AM','06:28 PM'],['05:17 AM','06:29 PM'],['05:16 AM','06:30 PM'],['05:15 AM','06:30 PM'],['05:13 AM','06:31 PM'],['05:12 AM','06:32 PM'],['05:11 AM','06:33 PM'],['05:09 AM','06:33 PM'],['05:08 AM','06:34 PM'],['05:07 AM','06:35 PM']],
  mecca:[['05:41 AM','06:13 PM'],['05:40 AM','06:14 PM'],['05:39 AM','06:15 PM'],['05:38 AM','06:15 PM'],['05:37 AM','06:16 PM'],['05:36 AM','06:17 PM'],['05:35 AM','06:18 PM'],['05:34 AM','06:18 PM'],['05:33 AM','06:19 PM'],['05:31 AM','06:20 PM'],['05:30 AM','06:21 PM'],['05:29 AM','06:21 PM'],['05:28 AM','06:22 PM'],['05:27 AM','06:23 PM'],['05:25 AM','06:24 PM'],['05:24 AM','06:24 PM'],['05:23 AM','06:25 PM'],['05:22 AM','06:26 PM'],['05:20 AM','06:27 PM'],['05:19 AM','06:27 PM'],['05:18 AM','06:28 PM'],['05:16 AM','06:29 PM'],['05:15 AM','06:29 PM'],['05:14 AM','06:30 PM'],['05:12 AM','06:31 PM'],['05:11 AM','06:32 PM'],['05:10 AM','06:32 PM'],['05:08 AM','06:33 PM'],['05:07 AM','06:34 PM'],['05:05 AM','06:34 PM']],
  istanbul:[['06:37 AM','06:26 PM'],['06:35 AM','06:27 PM'],['06:33 AM','06:29 PM'],['06:31 AM','06:30 PM'],['06:29 AM','06:31 PM'],['06:27 AM','06:33 PM'],['06:25 AM','06:34 PM'],['06:24 AM','06:35 PM'],['06:22 AM','06:37 PM'],['06:20 AM','06:38 PM'],['06:18 AM','06:39 PM'],['06:16 AM','06:41 PM'],['06:14 AM','06:42 PM'],['06:12 AM','06:43 PM'],['06:10 AM','06:45 PM'],['06:08 AM','06:46 PM'],['06:06 AM','06:47 PM'],['06:04 AM','06:49 PM'],['06:02 AM','06:50 PM'],['06:00 AM','06:51 PM'],['05:58 AM','06:52 PM'],['05:56 AM','06:54 PM'],['05:54 AM','06:55 PM'],['05:52 AM','06:56 PM'],['05:50 AM','06:58 PM'],['05:48 AM','06:59 PM'],['05:46 AM','07:00 PM'],['05:43 AM','07:02 PM'],['05:41 AM','07:03 PM'],['05:39 AM','07:04 PM']],
  cairo:[['04:49 AM','05:48 PM'],['04:48 AM','05:49 PM'],['04:47 AM','05:50 PM'],['04:46 AM','05:51 PM'],['04:45 AM','05:52 PM'],['04:44 AM','05:53 PM'],['04:43 AM','05:53 PM'],['04:42 AM','05:54 PM'],['04:40 AM','05:55 PM'],['04:39 AM','05:56 PM'],['04:38 AM','05:57 PM'],['04:37 AM','05:58 PM'],['04:36 AM','05:58 PM'],['04:35 AM','05:59 PM'],['04:33 AM','06:00 PM'],['04:32 AM','06:01 PM'],['04:31 AM','06:02 PM'],['04:30 AM','06:02 PM'],['04:28 AM','06:03 PM'],['04:27 AM','06:04 PM'],['04:26 AM','06:05 PM'],['04:25 AM','06:05 PM'],['04:23 AM','06:06 PM'],['04:22 AM','06:07 PM'],['04:21 AM','06:08 PM'],['04:19 AM','06:08 PM'],['04:18 AM','06:09 PM'],['04:17 AM','06:10 PM'],['04:15 AM','06:11 PM'],['04:14 AM','06:11 PM']],
  newyork:[['05:29 AM','05:19 PM'],['05:28 AM','05:21 PM'],['05:26 AM','05:22 PM'],['05:24 AM','05:23 PM'],['05:23 AM','05:24 PM'],['05:21 AM','05:25 PM'],['05:19 AM','05:26 PM'],['05:17 AM','05:28 PM'],['05:15 AM','05:29 PM'],['05:14 AM','05:30 PM'],['05:12 AM','05:31 PM'],['05:10 AM','05:32 PM'],['05:08 AM','05:33 PM'],['05:06 AM','05:35 PM'],['05:04 AM','05:36 PM'],['05:02 AM','05:37 PM'],['05:00 AM','05:38 PM'],['04:58 AM','05:39 PM'],['04:56 AM','05:40 PM'],['04:54 AM','05:42 PM'],['04:52 AM','05:43 PM'],['04:50 AM','05:44 PM'],['04:48 AM','05:45 PM'],['04:46 AM','05:46 PM'],['04:44 AM','05:48 PM'],['04:42 AM','05:49 PM'],['04:40 AM','05:50 PM'],['04:37 AM','05:51 PM'],['04:35 AM','05:52 PM'],['04:33 AM','05:54 PM']],
  losangeles:[['05:44 AM','05:47 PM'],['05:42 AM','05:48 PM'],['05:41 AM','05:49 PM'],['05:39 AM','05:50 PM'],['05:38 AM','05:52 PM'],['05:36 AM','05:53 PM'],['05:34 AM','05:54 PM'],['05:33 AM','05:55 PM'],['05:31 AM','05:56 PM'],['05:29 AM','05:57 PM'],['05:28 AM','05:59 PM'],['05:26 AM','06:00 PM'],['05:24 AM','06:01 PM'],['05:23 AM','06:02 PM'],['05:21 AM','06:03 PM'],['05:19 AM','06:04 PM'],['05:17 AM','06:06 PM'],['05:16 AM','06:07 PM'],['05:14 AM','06:08 PM'],['05:12 AM','06:09 PM'],['05:10 AM','06:10 PM'],['05:09 AM','06:11 PM'],['05:07 AM','06:13 PM'],['05:05 AM','06:14 PM'],['05:03 AM','06:15 PM'],['05:01 AM','06:16 PM'],['04:59 AM','06:17 PM'],['04:58 AM','06:18 PM'],['04:56 AM','06:20 PM'],['04:54 AM','06:21 PM']],
  london:[['05:38 AM','04:57 PM'],['05:36 AM','04:59 PM'],['05:33 AM','05:01 PM'],['05:31 AM','05:03 PM'],['05:28 AM','05:05 PM'],['05:26 AM','05:07 PM'],['05:23 AM','05:09 PM'],['05:21 AM','05:11 PM'],['05:18 AM','05:13 PM'],['05:16 AM','05:15 PM'],['05:13 AM','05:17 PM'],['05:11 AM','05:19 PM'],['05:08 AM','05:21 PM'],['05:05 AM','05:23 PM'],['05:03 AM','05:25 PM'],['05:00 AM','05:27 PM'],['04:57 AM','05:29 PM'],['04:55 AM','05:31 PM'],['04:52 AM','05:33 PM'],['04:49 AM','05:35 PM'],['04:47 AM','05:37 PM'],['04:44 AM','05:39 PM'],['04:41 AM','05:41 PM'],['04:38 AM','05:43 PM'],['04:35 AM','05:45 PM'],['04:33 AM','05:47 PM'],['04:30 AM','05:49 PM'],['04:27 AM','05:51 PM'],['04:24 AM','05:53 PM'],['04:21 AM','05:55 PM']],
  toronto:[['05:32 AM','05:25 PM'],['05:30 AM','05:27 PM'],['05:28 AM','05:28 PM'],['05:26 AM','05:30 PM'],['05:24 AM','05:31 PM'],['05:22 AM','05:33 PM'],['05:20 AM','05:34 PM'],['05:18 AM','05:36 PM'],['05:16 AM','05:37 PM'],['05:14 AM','05:38 PM'],['05:12 AM','05:40 PM'],['05:10 AM','05:41 PM'],['05:08 AM','05:43 PM'],['05:06 AM','05:44 PM'],['05:04 AM','05:46 PM'],['05:01 AM','05:47 PM'],['04:59 AM','05:49 PM'],['04:57 AM','05:50 PM'],['04:55 AM','05:51 PM'],['04:52 AM','05:53 PM'],['04:50 AM','05:54 PM'],['04:48 AM','05:56 PM'],['04:46 AM','05:57 PM'],['04:43 AM','05:58 PM'],['04:41 AM','06:00 PM'],['04:38 AM','06:01 PM'],['04:36 AM','06:03 PM'],['04:34 AM','06:04 PM'],['04:31 AM','06:05 PM'],['04:29 AM','06:07 PM']],
  kualalumpur:[['06:01 AM','07:24 PM'],['06:01 AM','07:24 PM'],['06:00 AM','07:24 PM'],['06:00 AM','07:25 PM'],['05:59 AM','07:25 PM'],['05:59 AM','07:25 PM'],['05:59 AM','07:25 PM'],['05:58 AM','07:25 PM'],['05:58 AM','07:26 PM'],['05:58 AM','07:26 PM'],['05:57 AM','07:26 PM'],['05:57 AM','07:26 PM'],['05:57 AM','07:27 PM'],['05:56 AM','07:27 PM'],['05:56 AM','07:27 PM'],['05:56 AM','07:27 PM'],['05:55 AM','07:28 PM'],['05:55 AM','07:28 PM'],['05:55 AM','07:28 PM'],['05:54 AM','07:28 PM'],['05:54 AM','07:29 PM'],['05:54 AM','07:29 PM'],['05:53 AM','07:29 PM'],['05:53 AM','07:29 PM'],['05:53 AM','07:30 PM'],['05:52 AM','07:30 PM'],['05:52 AM','07:30 PM'],['05:52 AM','07:30 PM'],['05:51 AM','07:31 PM'],['05:51 AM','07:31 PM']],
  jakarta:[['04:35 AM','06:03 PM'],['04:35 AM','06:03 PM'],['04:34 AM','06:03 PM'],['04:34 AM','06:03 PM'],['04:34 AM','06:03 PM'],['04:33 AM','06:03 PM'],['04:33 AM','06:03 PM'],['04:33 AM','06:04 PM'],['04:32 AM','06:04 PM'],['04:32 AM','06:04 PM'],['04:32 AM','06:04 PM'],['04:31 AM','06:04 PM'],['04:31 AM','06:04 PM'],['04:31 AM','06:04 PM'],['04:30 AM','06:05 PM'],['04:30 AM','06:05 PM'],['04:30 AM','06:05 PM'],['04:29 AM','06:05 PM'],['04:29 AM','06:05 PM'],['04:29 AM','06:05 PM'],['04:28 AM','06:05 PM'],['04:28 AM','06:06 PM'],['04:28 AM','06:06 PM'],['04:27 AM','06:06 PM'],['04:27 AM','06:06 PM'],['04:27 AM','06:06 PM'],['04:26 AM','06:06 PM'],['04:26 AM','06:06 PM'],['04:26 AM','06:07 PM'],['04:25 AM','06:07 PM']]
};

const WORLD_CLOCKS=[
  {label:'ğŸ“ Rawalpindi',tz:'Asia/Karachi'},{label:'ğŸ‡¦ğŸ‡ª Dubai',tz:'Asia/Dubai'},
  {label:'ğŸ‡¸ğŸ‡¦ Riyadh',tz:'Asia/Riyadh'},{label:'ğŸ‡¹ğŸ‡· Istanbul',tz:'Europe/Istanbul'},
  {label:'ğŸ‡¬ğŸ‡§ London',tz:'Europe/London'},{label:'ğŸ‡ºğŸ‡¸ New York',tz:'America/New_York'},
  {label:'ğŸ‡²ğŸ‡¾ KL',tz:'Asia/Kuala_Lumpur'},{label:'ğŸ‡®ğŸ‡© Jakarta',tz:'Asia/Jakarta'}
];

const RAMADAN_START=new Date('2026-02-19');
const LAYLATUL_DATES=['2026-03-11','2026-03-13','2026-03-15','2026-03-17','2026-03-19'];
const HIJRI_MONTHS=['Muharram','Safar','Rabi al-Awwal','Rabi al-Thani','Jumada al-Awwal','Jumada al-Thani',"Rajab","Sha'ban",'Ramadan','Shawwal','Dhu al-Qi\'dah','Dhu al-Hijjah'];
const GRE_MONTHS=['January','February','March','April','May','June','July','August','September','October','November','December'];
const DAY_NAMES=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

function getDayKey(d){const y=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,'0'),dd=String(d.getDate()).padStart(2,'0');return `${y}-${m}-${dd}`;}
function getRamDay(date){const d=new Date(date);d.setHours(0,0,0,0);const s=new Date(RAMADAN_START);s.setHours(0,0,0,0);const diff=Math.floor((d-s)/86400000);return diff>=0&&diff<30?diff+1:null;}

function gregToJD(y,m,d){if(m<3){y--;m+=12;}const A=Math.floor(y/100),B=2-A+Math.floor(A/4);return Math.floor(365.25*(y+4716))+Math.floor(30.6001*(m+1))+d+B-1524.5;}
function jdToHijri(jd){jd=Math.floor(jd)+.5;const z=jd-1948438.5,a=Math.floor(z/10631),b=z-10631*a,c=Math.floor((b-29.5001)/354.3671),dd=Math.floor(b-354.3671*Math.floor(c+.5)),e=Math.floor((dd+.5)/29.5001);const month=e<12?e+1:1,day=Math.floor(dd-29.5001*(e-1)+1),year=30*a+c+1;return{day,month,year};}

function getHijri(d){
  const ramDay=getRamDay(d);
  if(ramDay) return {d:ramDay,m:'Ramadan',y:1447};
  const jd=gregToJD(d.getFullYear(),d.getMonth()+1,d.getDate());
  const h=jdToHijri(jd);
  return {d:h.day,m:HIJRI_MONTHS[h.month-1],y:h.year};
}

let calYear=2026,calMonth=1;
function buildCalendar(){
  const hd=document.getElementById('calHeaders'),g=document.getElementById('calGrid');
  document.getElementById('calMonthLabel').textContent=`${GRE_MONTHS[calMonth]} ${calYear}`;
  hd.innerHTML=DAY_NAMES.map(d=>`<div class="cal-hdr">${d}</div>`).join('');
  const fd=new Date(calYear,calMonth,1).getDay();
  const dim=new Date(calYear,calMonth+1,0).getDate();
  const today=new Date();today.setHours(0,0,0,0);
  g.innerHTML='';
  for(let i=0;i<fd;i++){const e=document.createElement('div');e.className='cal-day empty';g.appendChild(e);}
  for(let d=1;d<=dim;d++){
    const dt=new Date(calYear,calMonth,d);dt.setHours(0,0,0,0);
    const dk=getDayKey(dt);
    const h=getHijri(dt);
    const isToday=dt.getTime()===today.getTime();
    const ramDay=getRamDay(dt);
    const isLayl=LAYLATUL_DATES.includes(dk);
    let cls='cal-day';
    if(ramDay) cls+=' ramadan';
    if(isLayl) cls+=' laylatul';
    if(isToday) cls+=' today';
    const hijriStr=h.m==='Ramadan'?`${h.d} Ram 1447`:`${h.d} ${h.m.slice(0,5)}`;
    const ramBadge=ramDay?`<div class="cal-badge" style="color:${isLayl?'#c39bd3':'var(--gold-dim)'}">${isLayl?'âœ¨ R'+ramDay:'R'+ramDay}</div>`:'';
    const el=document.createElement('div');el.className=cls;
    el.innerHTML=`<div class="cal-day-num">${d}</div><div class="cal-hijri">${hijriStr}</div>${ramBadge}`;
    g.appendChild(el);
  }
}
function calPrev(){calMonth--;if(calMonth<0){calMonth=11;calYear--;}buildCalendar();}
function calNext(){calMonth++;if(calMonth>11){calMonth=0;calYear++;}buildCalendar();}

function renderPrayers(id,key){
  const c=document.getElementById(id);if(!c) return;
  const city=CITIES[key];if(!city) return;
  const dayIdx=getTodayRamDay();
  let todaySehri=null,todayIftar=null;
  if(dayIdx!==null&&SCHEDULE[key]&&SCHEDULE[key][dayIdx]){
    const to24=t=>{const[time,ap]=t.split(' ');let[h,m]=time.split(':').map(Number);if(ap==='PM'&&h!==12)h+=12;if(ap==='AM'&&h===12)h=0;return String(h).padStart(2,'0')+':'+String(m).padStart(2,'0');};
    todaySehri=to24(SCHEDULE[key][dayIdx][0]);
    todayIftar=to24(SCHEDULE[key][dayIdx][1]);
  }
  const now=new Date();
  const nowStr=now.toLocaleTimeString('en-GB',{timeZone:city.tz,hour:'2-digit',minute:'2-digit'});
  const[nh,nm]=nowStr.split(':').map(Number);
  const nowM=nh*60+nm;
  c.innerHTML='';
  city.prayers.forEach(p=>{
    let displayTime=p.t;
    if(p.type==='sehri'&&todaySehri) displayTime=todaySehri;
    if(p.type==='iftar'&&todayIftar) displayTime=todayIftar;
    const[ph,pm]=displayTime.split(':').map(Number);
    const pM=ph*60+pm;
    const isCur=Math.abs(pM-nowM)<=20&&nowM<=pM;
    let cls='prayer-row';
    if(p.type==='sehri') cls+=' sehri-row';
    else if(p.type==='iftar') cls+=' iftar-row';
    if(isCur) cls+=' current-prayer';
    const b=isCur?'<span class="badge badge-now">NOW</span>':p.type==='sehri'?'<span class="badge badge-sehri">SEHRI</span>':p.type==='iftar'?'<span class="badge badge-iftar">IFTAR</span>':'';
    const row=document.createElement('div');row.className=cls;
    row.innerHTML=`<div><div class="prayer-name">${p.n}${b}</div><div class="prayer-arabic">${p.a}</div></div><div class="prayer-time-val">${displayTime}</div>`;
    c.appendChild(row);
  });
}

function getTodayRamDay(){
  const today=new Date();today.setHours(0,0,0,0);
  const s=new Date(RAMADAN_START);s.setHours(0,0,0,0);
  const diff=Math.floor((today-s)/86400000);
  return diff>=0&&diff<30?diff:null;
}

function renderFast(id,key){
  const c=document.getElementById(id);if(!c) return;
  const ct=CITIES[key];
  const dayIdx=getTodayRamDay();
  let sehri,iftar,dayLabel;
  if(dayIdx!==null&&SCHEDULE[key]&&SCHEDULE[key][dayIdx]){
    sehri=SCHEDULE[key][dayIdx][0];
    iftar=SCHEDULE[key][dayIdx][1];
    dayLabel=`Day ${dayIdx+1} Â· ${new Date(RAMADAN_START.getTime()+dayIdx*86400000).toLocaleDateString('en-GB',{day:'numeric',month:'short'})}`;
  } else {
    sehri=SCHEDULE[key]?SCHEDULE[key][0][0]:ct.sehri||'--:--';
    iftar=SCHEDULE[key]?SCHEDULE[key][0][1]:ct.iftar||'--:--';
    dayLabel='Today';
  }
  const gurl=`https://www.google.com/search?q=prayer+times+${encodeURIComponent(ct.name.toLowerCase().replace(/ /g,'+'))}+today`;
  c.innerHTML=`<a class="fast-box" href="${gurl}" target="_blank" style="text-decoration:none;display:block;"><div class="fast-label">ğŸŒ… Sehri â€” ${dayLabel}</div><div class="fast-time">${sehri}</div><div class="fast-arabic">Ø³Ø­Ø±ÛŒ / Ø³Ø­ÙˆØ±</div><div style="font-size:8px;color:#4285f4;margin-top:4px;letter-spacing:.5px;">ğŸ” Google</div></a><a class="fast-box" href="${gurl}" target="_blank" style="text-decoration:none;display:block;"><div class="fast-label">ğŸŒ‡ Iftar â€” ${dayLabel}</div><div class="fast-time">${iftar}</div><div class="fast-arabic">Ø§ÙØ·Ø§Ø± / Ø¥ÙØ·Ø§Ø±</div><div style="font-size:8px;color:#4285f4;margin-top:4px;letter-spacing:.5px;">ğŸ” Google</div></a>`;
}

function renderGLink(id,key){
  const c=document.getElementById(id);if(!c) return;
  const ct=CITIES[key];
  c.innerHTML=`<a class="google-link" href="https://www.google.com/search?q=${encodeURIComponent(ct.googleQ)}" target="_blank">ğŸ” Live Prayer Times â€” ${ct.name} on Google</a>`;
}

let curCity={pk:'karachi',gulf:'dubai',world:'newyork'};
function showCity(tab,key,btn){
  const maps={pk:'pkTabs',gulf:'gulfTabs',world:'worldTabs'};
  document.querySelectorAll(`#${maps[tab]} .city-btn`).forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');curCity[tab]=key;
  const ct=CITIES[key];
  if(tab==='pk'){document.getElementById('pkCityName').textContent=`${ct.flag} ${ct.name}`;renderFast('pkFastTimes',key);renderGLink('pkGoogleLink',key);renderPrayers('pkPrayers',key);}
  else if(tab==='gulf'){document.getElementById('gulfCityName').textContent=`${ct.flag} ${ct.name}`;document.getElementById('gulfCityTZ').textContent=ct.tzLabel;renderFast('gulfFastTimes',key);renderGLink('gulfGoogleLink',key);renderPrayers('gulfPrayers',key);}
  else{document.getElementById('worldCityName').textContent=`${ct.flag} ${ct.name}`;document.getElementById('worldCityTZ').textContent=ct.tzLabel;renderFast('worldFastTimes',key);renderGLink('worldGoogleLink',key);renderPrayers('worldPrayers',key);}
}

function fmt(tz){return new Date().toLocaleTimeString('en-GB',{timeZone:tz,hour:'2-digit',minute:'2-digit',second:'2-digit'});}
function fmtDate(tz){return new Date().toLocaleDateString('en-GB',{timeZone:tz,weekday:'long',day:'numeric',month:'long',year:'numeric'});}

function updateClocks(){
  const mc=document.getElementById('mainClock');if(mc) mc.textContent=fmt('Asia/Karachi');
  const md=document.getElementById('mainDate');if(md) md.textContent=fmtDate('Asia/Karachi');
  const pkNow=new Date(new Date().toLocaleString('en-US',{timeZone:'Asia/Karachi'}));
  const h=getHijri(pkNow);
  const id=document.getElementById('islamicDate');
  if(id) id.textContent=h.m==='Ramadan'?`ğŸŒ™ ${h.d} Ramadan 1447 AH â€” Day ${h.d} of Ramadan`:`${h.d} ${h.m} ${h.y} AH`;
  const rwp=document.getElementById('rwpClock');if(rwp) rwp.textContent=fmt('Asia/Karachi');
  const pk=document.getElementById('pkClock');if(pk) pk.textContent=fmt('Asia/Karachi');
  const gf=document.getElementById('gulfClock');if(gf) gf.textContent=fmt(CITIES[curCity.gulf]?.tz||'Asia/Dubai');
  const wc=document.getElementById('worldClock');if(wc) wc.textContent=fmt(CITIES[curCity.world]?.tz||'America/New_York');
  const wclocks=document.getElementById('worldClocks');
  if(wclocks) wclocks.innerHTML=WORLD_CLOCKS.map(c=>`<div class="city-time-row"><span class="city-label">${c.label}</span><span class="city-clock">${fmt(c.tz)}</span></div>`).join('');
  updateCountdown();
}

function updateCountdown(){
  const city=CITIES.rawalpindi;
  const localStr=new Date().toLocaleTimeString('en-GB',{timeZone:'Asia/Karachi',hour:'2-digit',minute:'2-digit',second:'2-digit'});
  const[lh,lm,ls]=localStr.split(':').map(Number);
  const nowS=lh*3600+lm*60+ls;
  const plist=city.prayers.filter(p=>!['Sunrise','Tarawih'].includes(p.n));
  let next=null;
  for(const p of plist){const[ph,pm]=p.t.split(':').map(Number);const pS=ph*3600+pm*60;if(pS>nowS){next={name:p.n,secs:pS};break;}}
  if(!next){const f=city.prayers.find(p=>p.n==='Fajr');if(f){const[ph,pm]=f.t.split(':').map(Number);next={name:'Fajr (Tomorrow)',secs:ph*3600+pm*60+86400};}}
  if(!next) return;
  let diff=next.secs-nowS;if(diff<0) diff+=86400;
  const hh=Math.floor(diff/3600),mm=Math.floor(diff%3600/60),ss=diff%60;
  const cv=document.getElementById('nextCountdown');const nl=document.getElementById('nextLabel');
  if(cv) cv.textContent=`${String(hh).padStart(2,'0')}:${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}`;
  if(nl) nl.textContent=`Until ${next.name} â€” Rawalpindi`;
}

// TRACKER
const P5=['Fajr','Dhuhr','Asr','Maghrib','Isha'];
let tData={};
try{tData=JSON.parse(localStorage.getItem('r1447tracker')||'{}');}catch(e){}
function save(){try{localStorage.setItem('r1447tracker',JSON.stringify(tData));}catch(e){}updateStats();}

function toggle(dk,p,btn){
  const k=`${dk}_${p}`;const cur=tData[k]||'none';
  if(cur==='none'){tData[k]='done';btn.textContent='âœ“';btn.className='mark-btn done';}
  else if(cur==='done'){tData[k]='missed';btn.textContent='âœ—';btn.className='mark-btn missed';}
  else{tData[k]='none';btn.textContent='â—‹';btn.className='mark-btn';}
  save();
}
function toggleToday(dk,p,btn){
  toggle(dk,p,btn);
  const st=btn.closest('[data-row]')?.querySelector('.tstatus');
  if(st){const v=tData[`${dk}_${p}`]||'none';st.textContent=v==='done'?'âœ… Performed':v==='missed'?'âŒ Missed':'â¬œ Not logged';}
  buildGrid();
}

function updateStats(){
  let done=0,missed=0,daysW=0;
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);
    const dk=getDayKey(dt);let has=false;
    P5.forEach(p=>{const v=tData[`${dk}_${p}`]||'none';if(v==='done'){done++;has=true;}else if(v==='missed'){missed++;has=true;}});
    if(has) daysW++;
  }
  const tot=30*5;
  ['statDone','statMissed','statPct','statDays'].forEach((id,i)=>{const el=document.getElementById(id);if(el) el.textContent=[done,missed,Math.round(done/tot*100)+'%',daysW][i];});
  const pb=document.getElementById('progBar');if(pb) pb.style.width=Math.round(done/tot*100)+'%';
}

function buildTodayRows(){
  const today=new Date();const dk=getDayKey(today);
  const lbl=document.getElementById('todayTrackerLabel');
  if(lbl) lbl.textContent=today.toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
  const c=document.getElementById('todayRows');if(!c) return;c.innerHTML='';
  P5.forEach(p=>{
    const v=tData[`${dk}_${p}`]||'none';
    const icon=v==='done'?'âœ“':v==='missed'?'âœ—':'â—‹';
    const cls=v==='done'?'mark-btn done':v==='missed'?'mark-btn missed':'mark-btn';
    const st=v==='done'?'âœ… Performed':v==='missed'?'âŒ Missed':'â¬œ Not logged';
    const row=document.createElement('div');row.setAttribute('data-row','1');
    row.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(201,168,76,0.07);';
    row.innerHTML=`<div><div style="font-family:'Cinzel',serif;font-size:12px;color:var(--text)">${p}</div><div class="tstatus" style="font-size:9px;color:var(--text-dim);margin-top:2px">${st}</div></div><button class="${cls}" style="width:32px;height:32px;font-size:13px" onclick="toggleToday('${dk}','${p}',this)">${icon}</button>`;
    c.appendChild(row);
  });
}

function buildGrid(){
  const g=document.getElementById('fullGrid');if(!g) return;
  const today=new Date();today.setHours(0,0,0,0);
  g.innerHTML='';
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);dt.setHours(0,0,0,0);
    const dk=getDayKey(dt);
    const isToday=dt.getTime()===today.getTime();
    const isLayl=LAYLATUL_DATES.includes(dk);
    const div=document.createElement('div');
    div.className='tracker-day'+(isToday?' today-day':'');
    if(isLayl) div.style.borderColor='rgba(155,89,182,0.45)';
    const dateStr=dt.toLocaleDateString('en-GB',{day:'2-digit',month:'short'});
    div.innerHTML=`<div class="tracker-day-label">${isLayl?'<span style="color:#c39bd3;font-size:8px">âœ¨Qadr?</span><br>':''}Day ${d+1}<br>${dateStr}</div><div class="prayer-marks" id="pm_${dk}"></div>`;
    g.appendChild(div);
    const marks=div.querySelector(`#pm_${dk}`);
    P5.forEach(p=>{
      const v=tData[`${dk}_${p}`]||'none';
      const icon=v==='done'?'âœ“':v==='missed'?'âœ—':'â—‹';
      const cls=v==='done'?'mark-btn done':v==='missed'?'mark-btn missed':'mark-btn';
      const row=document.createElement('div');row.className='prayer-mark';
      row.innerHTML=`<span class="prayer-mark-name">${p.slice(0,3)}</span><button class="${cls}" onclick="toggle('${dk}','${p}',this)">${icon}</button>`;
      marks.appendChild(row);
    });
  }
  updateStats();
}

function exportData(){
  const data={version:2,export:new Date().toISOString(),ramadan:'1447',tracker:tData};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download=`ramadan-1447-prayers-${getDayKey(new Date())}.json`;a.click();
  document.getElementById('backupStatus').textContent='âœ… Exported â€” '+new Date().toLocaleTimeString();
}
function importData(e){
  const f=e.target.files[0];if(!f) return;
  const r=new FileReader();
  r.onload=ev=>{try{const d=JSON.parse(ev.target.result);tData=d.tracker||d;save();buildGrid();buildTodayRows();document.getElementById('backupStatus').textContent='âœ… Imported!';}catch(err){document.getElementById('backupStatus').textContent='âŒ Invalid file.';}};
  r.readAsText(f);
}
function copyJSON(){
  navigator.clipboard.writeText(JSON.stringify({v:2,tracker:tData},null,2)).then(()=>{document.getElementById('backupStatus').textContent='âœ… Copied!';}).catch(()=>{document.getElementById('backupStatus').textContent='âŒ Could not copy.';});
}

function showTab(id,btn){
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  btn.classList.add('active');
}

// FAST TRACKER
let fastData={};
try{fastData=JSON.parse(localStorage.getItem('r1447fasts')||'{}');}catch(e){}

const FAST_CYCLE={none:'kept',kept:'missed',missed:'exempt',exempt:'none'};

function saveFasts(){
  try{localStorage.setItem('r1447fasts',JSON.stringify(fastData));}catch(e){}
  updateFastStats();
  buildMonthlySummary();
  updateQadaNote();
  updateTodayFastStatus();
}

function setTodayFast(status){
  const dk=getDayKey(new Date());
  fastData[dk]=status;
  saveFasts();
  buildFastGrid();
}

function updateFastBtn(btn,status){
  btn.textContent=status==='kept'?'âœ“':status==='missed'?'âœ—':status==='exempt'?'~':'â—‹';
  btn.className='fast-btn'+(status!=='none'?' '+status:'');
}

function cycleFast(dk,btn){
  const cur=fastData[dk]||'none';
  fastData[dk]=FAST_CYCLE[cur];
  if(fastData[dk]==='none') delete fastData[dk];
  saveFasts();
  updateFastBtn(btn,fastData[dk]||'none');
  const statusEl=btn.closest('.fast-day')?.querySelector('.fast-status');
  if(statusEl){
    const v=fastData[dk]||'none';
    statusEl.textContent=v==='kept'?'âœ“ Kept':v==='missed'?'âœ— Missed':v==='exempt'?'~ Exempt':'';
    statusEl.className='fast-status'+(v!=='none'?' '+v:'');
  }
  const todayDk=getDayKey(new Date());
  if(dk===todayDk) updateTodayFastStatus();
}

function updateTodayFastStatus(){
  const dk=getDayKey(new Date());
  const v=fastData[dk]||'none';
  const el=document.getElementById('todayFastStatus');
  if(!el) return;
  if(v==='none'){el.textContent="Not logged yet â€” tap a button above to log today's fast.";el.style.color='var(--text-dim)';}
  else if(v==='kept'){el.textContent="âœ… Today's fast is marked as KEPT. MashaAllah!";el.style.color='#2ecc71';}
  else if(v==='missed'){el.textContent="âŒ Today's fast marked as missed. Remember to make Qada.";el.style.color='#e74c3c';}
  else if(v==='exempt'){el.textContent="ğŸŸ¡ Marked as exempt (travel/illness/other). Make Qada when able.";el.style.color='#f39c12';}
  ['fbKept','fbMissed','fbExempt'].forEach(id=>{const b=document.getElementById(id);if(b) b.style.opacity='0.5';});
  const activeMap={kept:'fbKept',missed:'fbMissed',exempt:'fbExempt'};
  if(activeMap[v]){const ab=document.getElementById(activeMap[v]);if(ab){ab.style.opacity='1';ab.style.fontWeight='900';}}
}

function buildFastGrid(){
  const g=document.getElementById('fastGrid');if(!g) return;
  const today=new Date();today.setHours(0,0,0,0);
  g.innerHTML='';
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);dt.setHours(0,0,0,0);
    const dk=getDayKey(dt);
    const isToday=dt.getTime()===today.getTime();
    const isLayl=LAYLATUL_DATES.includes(dk);
    const isFuture=dt>today;
    const v=fastData[dk]||'none';
    const dateStr=dt.toLocaleDateString('en-GB',{day:'2-digit',month:'short'});
    let cls='fast-day';
    if(isToday) cls+=' today-fast';
    if(isLayl) cls+=' layl-fast';
    const div=document.createElement('div');div.className=cls;
    const btnIcon=v==='kept'?'âœ“':v==='missed'?'âœ—':v==='exempt'?'~':'â—‹';
    const btnCls='fast-btn'+(v!=='none'?' '+v:'');
    const statusText=v==='kept'?'âœ“ Kept':v==='missed'?'âœ— Missed':v==='exempt'?'~ Exempt':'';
    const statusCls='fast-status'+(v!=='none'?' '+v:'');
    const laylBadge=isLayl?'<div style="font-size:7px;color:#c39bd3;margin-bottom:2px;">âœ¨Qadr</div>':'';
    const todayBadge=isToday?'<div style="font-size:7px;color:var(--gold);margin-bottom:2px;">TODAY</div>':'';
    const futureLock=isFuture?'style="opacity:0.45;pointer-events:none;"':'';
    div.innerHTML=`${laylBadge}${todayBadge}<div class="fast-day-num">Day ${d+1}</div><div class="fast-day-date">${dateStr}</div><div class="fast-btn-row"><button class="${btnCls}" onclick="cycleFast('${dk}',this)" ${futureLock}>${btnIcon}</button></div><div class="${statusCls}">${statusText}</div>`;
    g.appendChild(div);
  }
  updateFastStats();
  buildMonthlySummary();
  updateQadaNote();
  updateTodayFastStatus();
}

function updateFastStats(){
  let kept=0,missed=0,exempt=0;
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);
    const v=fastData[getDayKey(dt)]||'none';
    if(v==='kept') kept++;else if(v==='missed') missed++;else if(v==='exempt') exempt++;
  }
  const logged=kept+missed+exempt;
  const remain=30-logged;
  const el=id=>document.getElementById(id);
  if(el('fstatKept')) el('fstatKept').textContent=kept;
  if(el('fstatMissed')) el('fstatMissed').textContent=missed;
  if(el('fstatExempt')) el('fstatExempt').textContent=exempt;
  if(el('fstatRemain')) el('fstatRemain').textContent=remain;
  const pb=el('fastProgBar');
  if(pb) pb.style.width=Math.round(kept/30*100)+'%';
}

function buildMonthlySummary(){
  const c=document.getElementById('monthlySummary');if(!c) return;
  const weeks=[{label:'Week 1 â€” Days 1â€“7',start:0,end:6},{label:'Week 2 â€” Days 8â€“14',start:7,end:13},{label:'Week 3 â€” Days 15â€“21',start:14,end:20},{label:'Week 4 â€” Days 22â€“28',start:21,end:27},{label:'Last 2 Days â€” Days 29â€“30',start:28,end:29}];
  let html='';
  weeks.forEach(w=>{
    let kept=0,missed=0,exempt=0,none=0;
    for(let d=w.start;d<=w.end;d++){
      const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);
      const v=fastData[getDayKey(dt)]||'none';
      if(v==='kept') kept++;else if(v==='missed') missed++;else if(v==='exempt') exempt++;else none++;
    }
    const chips=(kept?`<span class="msr-chip kept">âœ“ ${kept} Kept</span>`:'')+(missed?`<span class="msr-chip missed">âœ— ${missed} Missed</span>`:'')+( exempt?`<span class="msr-chip exempt">~ ${exempt} Exempt</span>`:'')+(none&&(kept||missed||exempt)?`<span style="font-size:9px;color:var(--text-dim);">${none} pending</span>`:'');
    html+=`<div class="month-summary-row"><div class="msr-label">${w.label}</div><div class="msr-val">${chips||'<span style="font-size:9px;color:var(--text-dim);">Not logged</span>'}</div></div>`;
  });
  let totK=0,totM=0,totE=0;
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);
    const v=fastData[getDayKey(dt)]||'none';
    if(v==='kept') totK++;else if(v==='missed') totM++;else if(v==='exempt') totE++;
  }
  html+=`<div class="month-summary-row" style="border-color:var(--gold);background:rgba(201,168,76,0.05);margin-top:8px;"><div class="msr-label" style="color:var(--gold);">ğŸŒ™ Total</div><div class="msr-val"><span class="msr-chip kept">âœ“ ${totK}</span><span class="msr-chip missed">âœ— ${totM}</span><span class="msr-chip exempt">~ ${totE}</span></div></div>`;
  c.innerHTML=html;
}

function updateQadaNote(){
  const el=document.getElementById('qadaNote');if(!el) return;
  let missed=0,exempt=0;
  for(let d=0;d<30;d++){
    const dt=new Date(RAMADAN_START);dt.setDate(dt.getDate()+d);
    const v=fastData[getDayKey(dt)]||'none';
    if(v==='missed') missed++;else if(v==='exempt') exempt++;
  }
  const qada=missed+exempt;
  if(qada===0&&missed===0&&exempt===0){el.textContent='Log your fasts above to see how many Qada fasts you need to make up.';return;}
  if(qada===0){el.innerHTML='<span style="color:#2ecc71;">MashaAllah! No Qada fasts needed. All logged fasts are kept. ğŸ¤²</span>';return;}
  let text=`You have <strong style="color:#f39c12;">${qada} Qada fast${qada>1?'s':''}</strong> to make up after Ramadan: `;
  const parts=[];
  if(missed) parts.push(`${missed} missed`);
  if(exempt) parts.push(`${exempt} exempt`);
  text+=parts.join(' + ')+'. Qada fasts can be kept any time after Eid before the next Ramadan. May Allah make it easy. ğŸ¤²';
  el.innerHTML=text;
}

function exportFastData(){
  const data={version:1,export:new Date().toISOString(),ramadan:'1447',fasts:fastData};
  const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download=`ramadan-1447-fasts-${getDayKey(new Date())}.json`;a.click();
  document.getElementById('fastBackupStatus').textContent='âœ… Exported â€” '+new Date().toLocaleTimeString();
}
function importFastData(e){
  const f=e.target.files[0];if(!f) return;
  const r=new FileReader();
  r.onload=ev=>{try{const d=JSON.parse(ev.target.result);fastData=d.fasts||d;saveFasts();buildFastGrid();document.getElementById('fastBackupStatus').textContent='âœ… Imported!';}catch(err){document.getElementById('fastBackupStatus').textContent='âŒ Invalid file.';}}
  r.readAsText(f);
}
function copyFastJSON(){
  navigator.clipboard.writeText(JSON.stringify({v:1,fasts:fastData},null,2)).then(()=>{document.getElementById('fastBackupStatus').textContent='âœ… Copied!';}).catch(()=>{document.getElementById('fastBackupStatus').textContent='âŒ Could not copy.';});
}

// ===== DOWNLOAD FOR OFFLINE USE =====
function downloadApp(){
  var html = document.documentElement.outerHTML;
  // Ensure proper doctype
  var fullHtml = '<!DOCTYPE html>\n' + html;
  var blob = new Blob([fullHtml], {type: 'text/html;charset=utf-8'});
  var a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'Ramadan-1447-Maria-Kanwal.html';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  setTimeout(function(){ URL.revokeObjectURL(a.href); }, 3000);
  // Show toast
  var toast = document.getElementById('dlToast');
  if(toast){ toast.classList.add('show'); setTimeout(function(){ toast.classList.remove('show'); }, 3500); }
}

// ===== INIT =====
buildCalendar();
renderFast('calFastTimes','rawalpindi');
renderFast('rwpFastTimes','rawalpindi');
renderGLink('rwpGoogleLink','rawalpindi');
renderPrayers('rwpPrayers','rawalpindi');
renderFast('pkFastTimes',curCity.pk);
renderGLink('pkGoogleLink',curCity.pk);
renderPrayers('pkPrayers',curCity.pk);
renderFast('gulfFastTimes',curCity.gulf);
renderGLink('gulfGoogleLink',curCity.gulf);
renderPrayers('gulfPrayers',curCity.gulf);
renderFast('worldFastTimes',curCity.world);
renderGLink('worldGoogleLink',curCity.world);
renderPrayers('worldPrayers',curCity.world);
buildTodayRows();
buildGrid();
updateStats();
buildFastGrid();
const tfl=document.getElementById('todayFastLabel');
if(tfl) tfl.textContent=new Date().toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
updateClocks();
setInterval(updateClocks,1000);

(function scheduleMidnightRefresh(){
  const now=new Date();
  const msToMidnight=(new Date(now.getFullYear(),now.getMonth(),now.getDate()+1)-now)+1000;
  setTimeout(()=>{
    renderFast('calFastTimes','rawalpindi');
    renderFast('rwpFastTimes','rawalpindi');
    renderFast('pkFastTimes',curCity.pk);
    renderFast('gulfFastTimes',curCity.gulf);
    renderFast('worldFastTimes',curCity.world);
    buildCalendar();
    buildTodayRows();
    buildGrid();
    buildFastGrid();
    scheduleMidnightRefresh();
  },msToMidnight);
})();
</script>
</body>
</html>
